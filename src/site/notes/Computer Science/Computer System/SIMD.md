---
{"dateCreated":"2024-03-24 22:02","tags":["concurrency"],"pageDirection":"rtl","dg-publish":true,"permalink":"/computer-science/computer-system/simd/","dgPassFrontmatter":true}
---

# SIMD
Χ‘Χ΅Χ™Χ›Χ•Χ Χ–Χ” Χ ΧΧΧ§Χ“ Χ‘ΧΧ—Χ“ ΧΧ”Χ›ΧΧ™Χ ΧΧ‘Χ¦ΧΆ ΧΧ›Χ Χ•Χ ΧΧ§Χ‘Χ™ΧΧ™ Χ”ΧΆΧ•Χ Χ” ΧΧ©Χ SIMD - single instruction multiple data. Χ‘Χ“Χ΄Χ› ΧΧ“Χ•Χ‘Χ¨ Χ‘Χ—Χ•ΧΧ¨Χ” Χ•Χ¤Χ§Χ•Χ“Χ•Χ ΧΧΆΧ‘Χ“ (ΧΧ©ΧΧ Χ” ΧΧ¤Χ™ ISA) Χ©ΧΧ‘Χ¦ΧΆΧ•Χ ΧΧ ΧΧ•ΧΧ” Χ¤Χ§Χ•Χ“Χ” ΧΆΧ ΧΧ΅Χ¤Χ¨ Χ™Χ—Χ™Χ“Χ•Χ ΧΧ™Χ“ΧΆ Χ‘Χ‘Χ ΧΧ—Χ.

Χ”Χ“Χ™ΧΧ’Χ¨ΧΧ” Χ”Χ‘ΧΧ” ΧΧ¦Χ™Χ’Χ” ΧΧ Χ΅Χ•Χ’Χ™ Χ”ΧΧ›Χ Χ•Χ Χ”ΧΧ§Χ‘Χ™ΧΧ™ Χ”Χ§Χ™Χ™ΧΧ™Χ ΧΧ¤Χ™ [Flynn's taxonomy](https://en.wikipedia.org/wiki/Flynn%27s_taxonomy)

![Pasted image 20240324220832.png](/img/user/Assets/Pasted%20image%2020240324220832.png)

ΧΧΧ©Χ, Χ Χ•Χ›Χ ΧΧ§Χ—Χ Χ©Χ Χ™ Χ•Χ§ΧΧ•Χ¨Χ™Χ A,B Χ‘Χ’Χ•Χ“Χ 4 Χ•ΧΧ‘Χ¦ΧΆ Χ΅Χ›Χ™ΧΧ” Χ©Χ $A[i]+B[i]$ ΧΧ›Χ $i\in[0,3]$ Χ‘Χ‘Χ ΧΧ—Χ. 

![Pasted image 20240324221151.png|250](/img/user/Assets/Pasted%20image%2020240324221151.png)

## AVX
ΧΧ—Χ“ Χ”Χ¨Χ›Χ™Χ‘Χ™ Χ—Χ•ΧΧ¨Χ” Χ”ΧΆΧ™Χ§Χ¨Χ™Χ™Χ Χ‘ΧΧΆΧ¨Χ›Χ•Χ x86 ΧΧ‘Χ™Χ¦Χ•ΧΆ Χ¤Χ§Χ•Χ“Χ•Χ SIMD Χ”Χ Χ¨Χ›Χ™Χ‘Χ™ Χ”AVX Advanced Vector Extensions.

Χ Χ–Χ›Χ™Χ¨ Χ©Χ‘ [[Computer Science/Computer System/x86-64 Assembly\|x86-64 Assembly]] Χ™Χ©Χ Χ general purpose registers ΧΧ—Χ™Χ©Χ•Χ‘Χ™Χ ΧΧ¨Χ™ΧΧΧΧ™Χ™Χ Χ©Χ integers Χ‘Χ™Χ™Χ¦Χ•Χ’ signed Χ• unsigned Χ•ΧΧΧ¨Χ™ΧΧΧΧ™Χ§Χ Χ›ΧΧ•Χ‘Χ•Χ. Χ”Χ—Χ•ΧΧ¨Χ” Χ”Χ–ΧΧ ΧΧ ΧΧΧ›Χ” Χ‘Χ—Χ™Χ©Χ•Χ‘Χ™Χ ΧΧ¨Χ™ΧΧΧΧ™Χ™Χ Χ©Χ [[Floating Point\|Floating Point]] Χ‘Χ¨ΧΧ Χ”Χ—Χ•ΧΧ¨Χ”. 

ΧΧΧ—Χ¨ ΧΧ΅Χ¤Χ¨ ΧΆΧ©Χ•Χ¨Χ™Χ Χ”Χ•Χ›Χ Χ΅Χ• Χ¨Χ›Χ™Χ‘Χ™ Χ” AVX Χ©ΧΧ•ΧΧ›Χ™Χ Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” Χ©Χ ΧΧ΅Χ¤Χ¨Χ™Χ ΧΆΧ©Χ¨Χ•Χ Χ™Χ™Χ Χ•Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” __Χ•Χ§ΧΧ•Χ¨Χ™Χ__ ΧΧ•Χ§ΧΧ•Χ¨Χ™Χ Χ‘Χ’Χ•Χ“Χ Χ©Χ ΧΆΧ“ 256 Χ‘Χ™Χ. 

![Pasted image 20240324223350.png|200](/img/user/Assets/Pasted%20image%2020240324223350.png)


Χ”registers Χ”ΧΧΧ• Χ”Χ ΧΧΆΧ™Χ ΧΧ—ΧΧ™Χ£ ΧΧ›Χ ΧΧ” Χ©Χ§Χ©Χ•Χ¨ ΧΧ§Χ•Χ“ Χ©ΧΧ‘Χ¦ΧΆ ΧΧ Χ™Χ¤Χ•ΧΧ¦Χ™Χ” ΧΆΧ float Χ• double. Χ›ΧΧ• Χ©Χ™Χ© registers Χ©Χ™Χ© ΧΧ”Χ ΧΧ¤Χ§Χ™Χ“ Χ‘ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ”Χ΄Χ¨Χ’Χ™ΧΧ™ΧΧ΄ Χ©ΧΧ Χ—Χ Χ• ΧΧ›Χ™Χ¨Χ™Χ (rax Χ›ΧΆΧ¨Χ Χ”Χ—Χ–Χ¨Χ” ΧΧΧ©Χ). Χ›Χ Χ’Χ Χregisters Χ”Χ Χ΄Χ Χ™Χ© ΧΧ¤Χ§Χ™Χ“Χ™Χ

1) xmm0-ΧΧ•Χ¤Χ΅ ΧΧ Χ”ΧΧ¨Χ’Χ•ΧΧ Χ Χ”Χ¨ΧΧ©Χ•Χ Χ•Χ’Χ ΧΧ ΧΆΧ¨Χ Χ”Χ”Χ—Χ–Χ¨Χ”
2) xmm1-xmm7 - Χ”ΧΆΧ‘Χ¨Χ Χ©ΧΧ¨ Χ”ΧΧ¨Χ’Χ•ΧΧ ΧΧ™Χ ΧΧ¤Χ•Χ Χ§Χ¦Χ™Χ”
3) xmm9-xmm31- [[Computer Science/Computer System/Functions in assembly\|Χ©ΧΧ™Χ¨Χ Χ” Caller saved]].

## scalar and packed modes
Χ›Χ¤Χ™ Χ©Χ¦Χ™Χ™Χ Χ• Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ”ΧΧΧ” ΧΧ•ΧΧ›Χ™Χ Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” Χ΅Χ§ΧΧ¨Χ™Χ Χ©Χ floats Χ•Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” Χ•Χ§ΧΧ•Χ¨Χ™Χ. ΧΧ›Χ Χ” ISA Χ¦Χ¨Χ™Χ ΧΧΧΧ•Χ Χ‘Χ¤Χ§Χ•Χ“Χ•Χ Χ©ΧΧΧ¤Χ©Χ¨Χ•Χ ΧΧ—Χ•ΧΧ¨Χ” ΧΧ”Χ‘Χ™Χ Χ‘Χ©Χ‘Χ™Χ ΧΧ” ΧΧ Χ—Χ Χ• Χ¨Χ•Χ¦Χ™Χ ΧΧ”Χ©ΧΧΧ© Χ‘Χ—Χ•ΧΧ¨Χ” Χ”Χ–ΧΧ. 

ΧΧ‘Χ Χ” Χ”Χ”Χ•Χ¨ΧΧ•Χ Χ”Χ›ΧΧΧ™ ΧΆΧ‘Χ•Χ¨ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”ΧΧΧ” Χ Χ¨ΧΧ” Χ›Χ›Χ”

$$\text{<OP>}\textcolor{red}{\text{<s/p>}}\textcolor{cyan}{\text{<s/d>}}$$

* $<OP>$ -Χ”Χ¤Χ§Χ•Χ“Χ” ΧΆΧ¦ΧΧ”, Χ™Χ© Χ”ΧΧ•Χ Χ¤Χ§Χ•Χ“Χ•Χ Χ›ΧΧ• Χ”Χ–Χ–Χ” Χ©Χ ΧΆΧ¨Χ›Χ™Χ, Χ—Χ™Χ‘Χ•Χ¨, Χ—Χ™Χ΅Χ•Χ¨ Χ•Χ›Χ•Χ³. Χ›Χ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ©Χ AVX Χ™ΧΧ—Χ™ΧΧ• Χ‘ 'v' (Χ™Χ© ΧΧΆΧ¨Χ›Χ Χ™Χ©Χ Χ” Χ™Χ•ΧΧ¨ Χ©Χ Χ§Χ¨ΧΧ SSE Χ©Χ©Χ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”Χ Χ‘ΧΧ™ 'v').
* $\textcolor{red}{\text{<s/p>}}$ - Χ§Χ•Χ‘ΧΆΧ™Χ Χ”ΧΧ ΧΧ Χ—Χ Χ• Χ¨Χ•Χ¦Χ™Χ ΧΧΆΧ‘Χ•Χ“ ΧΆΧ data ΧΧ΅Χ•Χ’ scalar ΧΧ• ΧΆΧ packed 
* $\textcolor{cyan}{\text{<s/d>}}$ - single precision ΧΧ• double precision. ΧΧ¤Χ™ Χ”Χ‘Χ—Χ™Χ¨Χ” Χ”Χ–ΧΧ ΧΧ Χ—Χ Χ• Χ Χ§Χ‘ΧΆ Χ’Χ Χ›ΧΧ” ΧΆΧ¨Χ›Χ™Χ Χ™Χ© ΧΧ Χ• Χ‘Χ•Χ§ΧΧ•Χ¨ (ΧΧ ΧΆΧ•Χ‘Χ“Χ™Χ ΧΆΧ doubles ΧΧ– Χ‘Χ¨Χ’Χ™Χ΅ΧΧ¨ xmm Χ™Χ›Χ•ΧΧ™Χ ΧΧ”Χ™Χ•Χ 2 ΧΧ΅Χ¤Χ¨Χ™Χ double ΧΧ• 4 ΧΧ΅Χ¤Χ¨Χ™ float).

_Χ“Χ•Χ’ΧΧ”:_ $\text{vaddpd xmm1, xmm2}$. Χ¤Χ§Χ•Χ“Χ AVS Χ©ΧΧ‘Χ§Χ©Χ ΧΧ—Χ‘Χ¨ ΧΧ xmm1 Χ• xmm2 Χ‘packed mode Χ•ΧΆΧ double precision.

__Χ‘Χ Χ™Χ’Χ•Χ“ ΧΧ¤Χ§Χ•Χ“Χ•Χ ΧΧ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ©Χ integers, Χ›ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ™Χ›Χ•ΧΧ” Χ’Χ ΧΧ”Χ›Χ Χ΅ ΧΧ¨Χ’Χ™Χ΅ΧΧ¨ Χ©ΧΧ™Χ©Χ™ Χ©Χ Χ¨Χ¦Χ” (Χ Χ¨ΧΧ” Χ“Χ•Χ’ΧΧ” Χ‘Χ”ΧΧ©Χ)__

![Pasted image 20240324225300.png|250](/img/user/Assets/Pasted%20image%2020240324225300.png)

ΧΧ Χ Χ—ΧΧ™Χ£ Χ single precision Χ Χ§Χ‘Χ:

![Pasted image 20240324225152.png|250](/img/user/Assets/Pasted%20image%2020240324225152.png)

Χ”Χ—Χ™Χ©Χ•Χ‘Χ™Χ Χ”ΧΧ¦Χ•Χ™Χ™Χ Χ™Χ Χ‘ΧΧΧ•Χ Χ” Χ ΧΆΧ©Χ™Χ Χ‘ΧΧ•Χ¤Χ ΧΧ§Χ‘Χ™ΧΧ™ ΧΧ—ΧΧ•ΧΧ™Χ.

ΧΧ Χ”Χ™Χ™Χ Χ• ΧΧ©ΧΧΧ©Χ™Χ Χ‘ scalar mode Χ”Χ™Χ™Χ Χ• ΧΧ‘Χ¦ΧΆΧ™Χ ΧΧ Χ¤ΧΆΧ•ΧΧ Χ”Χ—Χ™Χ‘Χ•Χ¨ Χ¨Χ§ ΧΆΧ 32/64 Χ”Χ‘Χ™ΧΧ™Χ Χ”Χ¨ΧΧ©Χ•Χ Χ™Χ.
Χ”ΧΧ•Χ¤Χ¦Χ™Χ” Χ©Χ scalar Χ§Χ™Χ™ΧΧ ΧΧ›Χ™Χ•Χ•Χ Χ©Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ”ΧΧ™ΧΧ• ΧΧ™Χ•ΧΆΧ“Χ™Χ ΧΧ›Χ Χ”Χ΅Χ•Χ’Χ™Χ Χ©Χ Χ—Χ™Χ©Χ•Χ‘Χ™Χ float-point Χ•ΧΧ Χ‘Χ”Χ›Χ¨Χ— Χ—Χ™Χ©Χ•Χ‘Χ™Χ Χ•Χ§ΧΧ•Χ¨Χ™Χ™Χ.

![Pasted image 20240324225641.png|250](/img/user/Assets/Pasted%20image%2020240324225641.png)

### Χ¤Χ§Χ•Χ“Χ•Χ ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ”
![Pasted image 20240324230044.png](/img/user/Assets/Pasted%20image%2020240324230044.png)

* $S_{1}$ (Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ”ΧΧΧ¦ΧΆΧ™ ΧΧ‘Χ™Χ Χ”Χ©ΧΧ•Χ©Χ”) - Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ Χ’Χ Χ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ, Χ Χ–Χ›Χ™Χ¨ Χ©Χ”Χ΅Χ™Χ ΧΧ§Χ΅ ΧΧ’Χ©Χ ΧΧ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ Χ”Χ™Χ '(reg)'.
* Χ©ΧΧ¨ Χ”ΧΧ¨Χ’Χ•ΧΧ ΧΧ™Χ ΧΧ Χ™Χ›Χ•ΧΧ™Χ ΧΧ”Χ™Χ•Χ Χ›ΧΧ•Χ‘Χ ΧΧΧ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ©Χ AVX Χ‘ΧΧ‘Χ“.
* ΧΧ Χ Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ©ΧΧ™Χ©Χ™ Χ‘ΧΧ¨Χ’Χ•ΧΧ ΧΧ™Χ ΧΧ– Χ”ΧΧ•Χ¦Χ ΧΧ›Χ Χ΅ ΧΧΧ™Χ•:
	* Χ”Χ¤Χ§Χ•Χ“Χ” vmulsd %xmm0, %xmm1, %xmm4 ΧΧΆΧ©Χ” - xmm4 β† xmm1 $\cdot$ xmm0
	* Χ”Χ¤Χ§Χ•Χ“Χ” vmulps %ymm0, (%rcx), %ymm1 ΧΧΆΧ©Χ” - $ymm1 β† [b_{7}\cdotπ‘_7,β€¦,b_{1}\cdot a_{1},b_{0}\cdot a_{0}]$ Χ›ΧΧ©Χ¨ rcx ΧΧ¦Χ‘Χ™ΧΆ Χ128 Χ”Χ‘Χ™ΧΧ™Χ Χ©Χ‘Χ”Χ Χ ΧΧ¦Χ Χ”Χ•Χ§ΧΧ•Χ¨ $[b]$ . 
	* _ΧΧ ΧΧ Χ Χ™ΧΧ ΧΧ¨Χ’Χ•ΧΧ Χ Χ©ΧΧ™Χ©Χ™ Χ”ΧΧ•Χ¦ΧΧ” ΧΧ›Χ Χ΅ ΧΧΧ¨Χ’Χ•ΧΧ Χ Χ”Χ¨ΧΧ©Χ•Χ_.
* Χ Χ©Χ™Χ ΧΧ‘ Χ©ΧΧ¤Χ§Χ•Χ“Χ” sqrt ΧΧ™Χ Χ’Χ¨Χ΅Χ” ΧΆΧ 'v' Χ›Χ™ Χ–ΧΧ Χ¤Χ§Χ•Χ“Χ” Χ©Χ AVX Χ‘ΧΧ‘Χ“.

### Χ¤Χ§Χ•Χ“Χ•Χ move
Χ Χ–Χ›Χ™Χ¨ Χ©[[Computer Science/Computer System/basic commands in assembly#move to\|move]] ΧΧΧ Χ¤Χ§Χ•Χ“Χ•Χ Χ©ΧΧΧ¤Χ©Χ¨Χ•Χ ΧΧ”Χ–Χ™Χ– ΧΧ•Χ›Χ Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ ΧΧ• Χ‘Χ™Χ memory ΧΧ¨Χ’Χ™Χ΅ΧΧ¨ ΧΧ• Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χmemory. 

![Pasted image 20240324231800.png](/img/user/Assets/Pasted%20image%2020240324231800.png)
* Χ΅Χ™Χ ΧΧ§Χ΅ Χ©Χ Χ¤Χ§Χ•Χ“Χ”:
	* v-vector instruction
	* ss-scalar single
	* sd-scalar double
	* ps-packed single
	* pd-packed double
	* $M_{32}$ Χ• $M_{64}$ - ΧΧ•Χ§Χ— 64 ΧΧ• 32 Χ‘Χ™Χ ΧΧ”Χ›ΧΧ•Χ‘Χ Χ”Χ ΧΧ•Χ Χ”.
	* X ΧΧ™Χ™Χ¦Χ’ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ©Χ AVX.

* addressing mode Χ–Χ”Χ” ΧΧ¤Χ§Χ•Χ“Χ mov Χ”Χ¨Χ’Χ™Χ
	![Pasted image 20221222185500.png|450](/img/user/Assets/Pasted%20image%2020221222185500.png)

* ΧΧ™Χ“ΧΆ Χ‘Χ–Χ›Χ¨Χ•Χ Χ—Χ™Χ™Χ‘ ΧΧ”Χ™Χ•Χ [aligned](https://www.youtube.com/watch?v=OKjOZBaKlOc)ΧΧ¤Χ™ Χ”Χ’Χ•Χ“Χ Χ©Χ Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ‘Χ‘Χ™ΧΧ™Χ. Χ”Χ΅Χ™Χ‘Χ” ΧΧ›Χ Χ”Χ™Χ Χ‘Χ™Χ¦Χ•ΧΆΧ™Χ Χ©Χ§Χ©Χ•Χ¨Χ™Χ Χ[[Computer Science/Computer System/Computer System Cache Memory\|Cache]], Χ”Χ©ΧΧ™Χ¨Χ” Χ‘ cache Χ”Χ™Χ Χ‘Χ¨ΧΧ Χ”Χ‘ΧΧ•Χ§Χ™Χ Χ©Χ Χ§Χ‘ΧΆ ΧΧ¤Χ™ Χ›ΧΧ•Χ Χ”Χ‘Χ™ΧΧ™Χ Χ‘Χ›ΧΧ•Χ‘Χ Χ©ΧΧ™Χ•ΧΆΧ“Χ Χblock offset. ΧΧ›Χ ΧΧ™Χ“ΧΆ Χ©Χ”Χ•Χ ΧΧ aligned ΧΆΧΧ•Χ ΧΧ’Χ¨Χ•Χ ΧΧ›Χ Χ©data struct ΧΧ—Χ“ Χ™ΧΧ¤Χ•Χ΅ Χ©ΧΧ™ lines Χ©Χ cache. Χ“Χ‘Χ¨ Χ©Χ¤Χ•Χ’ΧΆ ΧΧΧ•Χ“ Χ‘Χ‘Χ™Χ¦Χ•ΧΆΧ™Χ. 
	* ΧΧ›Χ Χ”ΧΧ•Χ a Χ‘Χ¤Χ§Χ•Χ“Χ” ΧΧ—Χ™Χ™Χ‘ Χ©Χ”data Χ©Χ§Χ•Χ¨ΧΧ™Χ ΧΧ”Χ–Χ›Χ¨Χ•Χ Χ™Χ”Χ™Χ” aligned Χ©Χ 16 Χ‘ΧΧ™Χ (128 Χ‘Χ™ΧΧ™Χ), ΧΧ—Χ¨Χ ΧΧ–Χ›Χ¨ Χ©Χ’Χ™ΧΧ”.
	* Χ–Χ” Χ¨ΧΧ•Χ•Χ ΧΧ™ Χ¨Χ§ Χ mov Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ•Χ–Χ›Χ¨Χ•Χ Χ›Χ™ Χ‘Χ™Χ Χ©Χ Χ™ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ ΧΧ™Χ ΧΧ¤Χ©Χ¨Χ•Χ Χ©Χ–Χ” Χ™Χ§Χ¨Χ”.

### Χ¤Χ§Χ•Χ“Χ•Χ conversion
__Χ”ΧΧ¨Χ” Χintegers__:
![Pasted image 20240324235921.png](/img/user/Assets/Pasted%20image%2020240324235921.png)
* v-vector instruction
* cvtt - convert with truncation Χ”ΧΧ¨Χ” ΧΆΧ Χ—Χ™ΧΧ•Χ (ΧΆΧ™Χ’Χ•Χ Χ›ΧΧ¤Χ™ ΧΧΧ”), Χ”ΧΧ§Χ¨Χ” Χ”Χ–Χ” Χ”Χ¤Χ™Χ›Χ Χ”Χ—ΧΧ§ Χ©ΧΧ™Χ™Χ¦Χ’ ΧΧ Χ”Χ©Χ‘Χ¨ Χ‘ΧΧ΅Χ¤Χ¨ Χ”ΧΆΧ©Χ¨Χ•Χ Χ™ Χ 0.
* ss2si - ΧΧ΅Χ¤Χ¨ float Χ int
* sd2si- ΧΧ΅Χ¤Χ¨ double Χ int 
* ss2siq, sd2siq - ΧΧ΅Χ¤Χ¨ double Χ quad word integer.
* Χ” source Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ register X Χ›ΧΧ•ΧΧ¨ ΧΧ΅Χ•Χ’ AVX ΧΧ• Χ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ Χ©ΧΧ¤Χ Χ” Χ float ΧΧ• double 
* Χ”Χ™ΧΆΧ“ Χ”Χ•Χ ΧΧΧ™Χ“ register Χ©Χ 32 ΧΧ• 64 Χ‘Χ™Χ Χ¨Χ’Χ™Χ.

![Pasted image 20240325000839.png](/img/user/Assets/Pasted%20image%2020240325000839.png)
1) Χ”Χ§Χ•Χ“ ΧΧ–Χ™Χ– ΧΧ”Χ›ΧΧ•Χ‘Χ Χ©Χ‘Χ” val Χ ΧΧ¦Χ ΧΧ Χ”ΧΧ•Χ›Χ Χ©ΧΧ• Χ xmm0.
2) ΧΧΧ‘Χ¦ΧΆ Χ”ΧΧ¨Χ” Χ xmm1 ΧΧΧ΅Χ¤Χ¨ quad word Χ©ΧΧ•ΧΧ• Χ©ΧΧ™Χ Χ‘ rdi.

__Χ”ΧΧ¨Χ” Χinteger Χfloat/double__
![Pasted image 20240325001046.png](/img/user/Assets/Pasted%20image%2020240325001046.png)
* v - vector
* cvt - convert
* si2ss/sd - Χ”ΧΧ¨Χ” Χ single ΧΧ• double
* q - ΧΧ΅ΧΧ Χ©Χ’Χ•Χ“Χ Χ” int Χ”Χ•Χ quad word.
* Χ ΧΧΆΧΧ Χ source 2 ΧΧ¨Χ•Χ‘, Χ¤Χ©Χ•Χ Χ Χ©Χ™Χ Χ’Χ Χ‘ source 2 Χ•Χ’Χ Χ‘ destination ΧΧ ΧΧ•ΧΧ• Χ¨Χ’Χ™Χ΅ΧΧ¨. 
![Pasted image 20240325002556.png](/img/user/Assets/Pasted%20image%2020240325002556.png)

__Χ”ΧΧ¨Χ” Χ float Χ double__
ΧΧ¤Χ©Χ¨ Χ’Χ ΧΧ”ΧΧ™Χ¨ ΧΧ΅Χ¤Χ¨Χ™Χ ΧΆΧ©Χ¨Χ•Χ Χ™Χ™Χ Χ•ΧΧ©Χ Χ•Χ ΧΧ Χ¨ΧΧ Χ”Χ“Χ™Χ•Χ§ Χ©ΧΧ”Χ Χ‘ΧΧ•Χ¤Χ Χ”Χ‘Χ 

![Pasted image 20240325002944.png](/img/user/Assets/Pasted%20image%2020240325002944.png)
* vcvtpd2ps - ΧΧ•Χ§Χ—Χ double Χ•ΧΧΧ™Χ¨Χ” Χfloat 
* vcvtss2sd - ΧΧ•Χ§Χ float Χ•ΧΧΧ™Χ¨Χ” Χdouble.

==_Χ”Χ΅Χ™Χ‘Χ” Χ©Χ‘ΧΧ¤Χ•Χ¨ Χ Χ¨ΧΧ” Χ›ΧΧ™ΧΧ• ΧΆΧ‘Χ¨Χ Χ• ΧΧΧΆΧ¨Χ Χ‘Χ’Χ•Χ“Χ 4 ΧΧΧΆΧ¨Χ Χ‘Χ’Χ•Χ“Χ 2 Χ›ΧΧ©Χ¨ Χ”ΧΧ¨Χ Χ• Χ double Χ•Χ”Χ¤Χ•Χ Χ›ΧΧ©Χ¨ Χ”ΧΧ¨Χ Χ• Χ float Χ”Χ™Χ Χ©Χ‘Χ¤Χ•ΧΆΧ Χ–Χ” Χ‘ΧΧΧ ΧΧ” Χ©Χ§Χ•Χ¨Χ”, Χ‘Χ’ΧΧ Χ©ΧΧ“Χ•Χ‘Χ¨ Χ’Χ Χ‘Χ•Χ§ΧΧ•Χ¨Χ™Χ ΧΧΧ¨Χ Χ• Χ©Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ ΧΧ™ Χ‘double Χ©ΧΧ™ ΧΧ΅Χ¤Χ¨Χ™Χ Χ•Χ‘ float ΧΧ¨Χ‘ΧΆΧ”, ΧΧ‘Χ ΧΧ ΧΧ Χ™ ΧΧΧ™Χ¨ ΧΧ Χ™ ΧΧ• ΧΧ¨Χ¤Χ΅ Χ‘ΧΧ¤Χ΅Χ™Χ ΧΧ• ΧΧ•Χ•ΧΧ¨ ΧΆΧ Χ©ΧΧ™ Χ”ΧΧ΅Χ¤Χ¨Χ™Χ Χ‘Χ‘ΧΧ™Χ Χ”Χ’Χ‘Χ•Χ”Χ™Χ_==

Χ›ΧΧ•Χ‘Χ Χ©Χ”Χ¤ΧΆΧ•ΧΧ” Χ”Χ–ΧΧ ΧΆΧΧ•ΧΧ” ΧΧ’Χ¨Χ•Χ ΧΧ Χ• ΧΧ• ΧΧΧ‘Χ“ Χ“Χ™Χ•Χ§ Χ©Χ Χ”ΧΧ΅Χ¤Χ¨ ΧΧ• ΧΧ”Χ¨Χ—Χ™Χ‘ ΧΧ Χ”Χ“Χ™Χ•Χ§ Χ©ΧΧ• Χ‘ΧΧ—Χ™Χ¨ Χ©Χ ΧΆΧ•Χ“ 4 Χ‘ΧΧ™Χ. 

__Χ“Χ•Χ’ΧΧ”__
Χ Χ΅ΧΧ›Χ ΧΆΧ Χ§ΧΧΆ Χ”Χ§Χ•Χ“ Χ”Χ‘Χ
```C
double func(double w, int x, float y, long z) {
	return y*x - w/z;
}
```

Χ Χ©Χ™Χ ΧΧ‘ ΧΧ›ΧΧ” Χ“Χ’Χ©Χ™Χ:
* x Χ• z Χ Χ©ΧΧ¨Χ™Χ Χ‘ rdi Χ• rsi Χ‘Χ”ΧΧΧΧ”.
* w Χ• y Χ Χ©ΧΧ¨Χ™Χ Χ‘ xmm0 Χ• xmm1 Χ‘Χ”ΧΧΧΧ”.
* $y \cdot x$ Χ–Χ” Χ—Χ™Χ©Χ•Χ‘ Χ©ΧΧΆΧ¨Χ‘ int Χ• float Χ•ΧΧ›Χ Χ¦Χ¨Χ™Χ ΧΧ”ΧΧ™Χ¨ ΧΧ x Χ float.
* ΧΧ—Χ ΧΧ•ΧΧ• Χ”Χ΅Χ‘Χ¨ Χ¦Χ¨Χ™Χ ΧΧ”ΧΧ™Χ¨ ΧΧ z Χ double.
* Χ¤ΧΆΧ•ΧΧ Χ”Χ—Χ™Χ΅Χ•Χ¨ Χ”Χ™Χ Χ‘Χ™Χ float Χ double Χ•ΧΧ›Χ Χ¦Χ¨Χ™Χ ΧΧ”ΧΧ™Χ¨ ΧΧ Χ” float Χ double

```assembly
func: 
	vcvtsi2ss edi, xmm2, xmm2 
	vmulss xmm1, xmm2, xmm1
	vcvtss2sd xmm1,xmm2
	vcvtsi2sdq rsi xmm1, xmm1
	vdivsd xmm1, xmm0, xmm0
	vsubsd xmm0 xmm2 xmm0
	ret
```

1) Χ”Χ©Χ•Χ¨Χ” Χ”Χ¨ΧΧ©Χ•Χ Χ” ΧΧΧ™Χ¨Χ” ΧΧ x Χfloat Χ•Χ©ΧΧ” ΧΧ•ΧΧ• Χ‘ xmm2
2) Χ”Χ©Χ•Χ¨Χ” Χ”Χ©Χ Χ™Χ™Χ” ΧΧ›Χ¤Χ™ΧΧ” Χ‘Χ™Χ y Χ x Χ•Χ©ΧΧ” ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ‘ xmm1 
3) Χ”Χ©Χ•Χ¨Χ” Χ”Χ©ΧΧ™Χ©Χ™Χ ΧΧΧ™Χ¨Χ” Χ double ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ•Χ©ΧΧ” Χ‘ xmm1. 
4) Χ”Χ©Χ•Χ¨Χ” Χ”Χ¨Χ‘Χ™ΧΆΧ™Χ ΧΧΧ™Χ¨Χ” ΧΧ z Χ double 
5) Χ”Χ©Χ•Χ¨Χ” Χ”Χ—ΧΧ™Χ©Χ™Χ Χ•Χ”Χ©Χ™Χ©Χ™Χ ΧΧ‘Χ¦ΧΆΧ•Χ ΧΧ Χ”Χ—Χ™ΧΧ•Χ§ Χ•Χ”Χ›Χ¤Χ. 

### constants
Χ‘ AVX ΧΧ Χ Χ™ΧΧ ΧΧ¨Χ©Χ•Χ immediate Χ›ΧΧ• Χ‘registers Χ”Χ¨Χ’Χ™ΧΧ™Χ Χ‘Χ¤ΧΆΧ•ΧΧ•Χ ΧΧ¨Χ™ΧΧΧΧ™Χ•Χ. ΧΧ›Χ Χ™Χ© Χ¦Χ•Χ¨Χ ΧΧΧΆΧ•Χ ΧΧ•ΧΧ Χ™Χ©Χ™Χ¨Χ•Χ ΧΧ”Χ–Χ›Χ¨Χ•Χ. 
Χ”Χ©ΧΧ™Χ¨Χ” Χ‘Χ–Χ›Χ¨Χ•Χ ΧΧΆΧ©Χ” ΧΧ• ΧΆΧ Χ™Χ“Χ™ Χ©ΧΧ™Χ¨Χ Χ”Χ™Χ™Χ¦Χ•Χ’ Χ”Χ‘Χ™Χ ΧΧ¨Χ™ $.byte$ ΧΧ• ΧΆΧ Χ™Χ“Χ™ Χ©ΧΧ™Χ¨Χ Χ”ΧΧ΅Χ¤Χ¨ Χ”Χ©ΧΧ Χ›Χ¤Χ™ Χ©ΧΧ•ΧΧ Χ‘Χ™ΧΧ™Χ Χ”Χ™Χ• ΧΧ™Χ™Χ¦Χ’Χ™Χ ΧΧ•ΧΧ• Χ‘ IEEE. 

ΧΧΧ©Χ ΧΆΧ‘Χ•Χ¨ Χ”Χ¤Χ•Χ Χ§Χ¦Χ™Χ” 
```C
double f(double temp) {
	return 1.8 * temp + 32.0;
}
```

Χ”Χ§Χ•Χ“ Χ™Χ¨ΧΧ” Χ›Χ›Χ” 
![Pasted image 20240325011330.png|350](/img/user/Assets/Pasted%20image%2020240325011330.png)
Χ”Χ΅Χ™Χ‘Χ” Χ©Χ›ΧΧ Χ©ΧΧ¨Χ Χ• Χ”4 Χ‘ΧΧ™Χ Χ‘Χ Χ¤Χ¨Χ“ Χ”Χ™Χ Χ‘Χ’ΧΧ [[Computer Science/Computer System/Little and Big Endian\|endianness]]. Χ”Χ™Χ” ΧΧ¤Χ©Χ¨ Χ’Χ ΧΧ©ΧΧ•Χ¨ ΧΧ Χ›Χ Χ”8 Χ‘ΧΧ™Χ Χ‘Χ‘Χ ΧΧ—Χ ΧΧ‘Χ Χ”Χ™Χ” Χ¦Χ¨Χ™Χ ΧΧ©Χ™Χ Χ©Χ”Χ™Χ™Χ¦Χ•Χ’ Χ¦Χ¨Χ™Χ ΧΧ”Χ™Χ•Χ ΧΧ¤Χ™ Χ”ΧΧ™Χ Χ“Χ™ΧΧ Χ™Χ•Χ Χ©Χ Χ”ΧΧΆΧ¨Χ›Χ.
### bitwise
![Pasted image 20240325102933.png|350](/img/user/Assets/Pasted%20image%2020240325102933.png)
Χ¦Χ¨Χ™Χ ΧΧ©Χ™Χ ΧΧ‘ Χ©Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”Χ Χ΄Χ ΧΆΧ•Χ‘Χ“Χ•Χ ΧΆΧ packed data Χ•ΧΧ›Χ Χ”Χ ΧΧΆΧ“Χ›Χ Χ•Χ ΧΧ Χ›Χ Χ”Χ‘ΧΧ™Χ Χ‘ xmm registers Χ’Χ ΧΧ Χ”Χ©ΧΧΧ©Χ Χ• Χ¨Χ§ Χ‘Χ—ΧΧ§ ΧΧ”Χ.

![Pasted image 20240325104535.png|300](/img/user/Assets/Pasted%20image%2020240325104535.png)
Χ§ΧΧΆ Χ”Χ§Χ•Χ“ Χ”Χ‘Χ Χ”Χ•Χ¤Χ ΧΧ΅Χ¤Χ¨Χ™Χ Χ‘Χ•Χ§ΧΧ•Χ¨ ΧΧΧ¦Χ•Χ¨Χ” Χ”Χ©ΧΧ™ΧΧ™Χ Χ©ΧΧ”Χ Χ‘ΧΧΧ¦ΧΆΧ•Χ xor. Χ”ΧΧ΅Χ¤Χ¨Χ™Χ Χ©Χ¨Χ©Χ•ΧΧ™Χ Χ©Χ Χ¤Χ©Χ•Χ ΧΧ¨Χ›Χ™Χ‘Χ™Χ ΧΧ΅Χ¤Χ¨ Χ‘Χ™Χ ΧΧ¨Χ™ Χ©Χ” MSB Χ©ΧΧ• Χ”Χ•Χ 1 Χ•Χ›Χ Χ”Χ©ΧΧ¨ ΧΧ¤Χ΅Χ™Χ. ΧΧ›Χ Χ”Χ•Χ Χ™Χ”Χ¤Χ•Χ ΧΧ Χ”Χ‘Χ™Χ Χ΅Χ™ΧΧ ΧΆΧ‘Χ•Χ¨ Χ›Χ float Χ‘Χ•Χ§ΧΧ•Χ¨ Χ•Χ›Χ Χ”Χ©ΧΧ¨ Χ™Χ—Χ–Χ™Χ¨ ΧΧ ΧΧ•ΧΧ• Χ”ΧΆΧ¨Χ Χ©Χ Χ”Χ‘Χ™Χ Χ©Χ”Χ™Χ” ΧΧ§Χ•Χ“Χ Χ‘ΧΆΧ Χ‘Χ™Χ¦Χ•ΧΆ xor. 

### Comparison
![Pasted image 20240325104901.png|300](/img/user/Assets/Pasted%20image%2020240325104901.png)

*  S2 Χ—Χ™Χ™Χ‘ ΧΧ”Χ™Χ•Χ xmm.
* S1 Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ Χ’Χ Χ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ.
* Χ”Χ¤ΧΆΧ•ΧΧ” Χ”Χ–ΧΧ ΧΧ“ΧΧ™Χ§Χ” ΧΧ Χ” EFlags registers Χ”ΧΧ•Χ›Χ¨Χ™Χ Χ•ΧΧ“ΧΧ™Χ§Χ” Χ’Χ Χ›ΧΧ” flags Χ¤Χ—Χ•Χ ΧΧ•Χ›Χ¨Χ™Χ 
	* unordered ΧΧ ΧΧ—Χ“ Χ”ΧΧ΅Χ¤Χ¨Χ™Χ Χ”Χ•Χ NAN 
	* parity ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ”Χ™Χ NAN

![Pasted image 20240325105229.png|200](/img/user/Assets/Pasted%20image%2020240325105229.png)

Χ Χ¨ΧΧ” Χ§Χ•Χ“ c Χ©Χ‘Χ•Χ“Χ§ Χ”ΧΧ ΧΧ΅Χ¤Χ¨ Χ”Χ•Χ NAN Χ•ΧΧ™Χ Χ–Χ” Χ ΧΆΧ©Χ” Χ‘ΧΧ΅ΧΧ‘ΧΧ™

```C
f(float x) {
	if(x<0) return -1;
	if(x==0) return 0;
	if(x>0) return 1;
	if(isnan(x)) return 2;
}
```

![Pasted image 20240325111650.png|350](/img/user/Assets/Pasted%20image%2020240325111650.png)

