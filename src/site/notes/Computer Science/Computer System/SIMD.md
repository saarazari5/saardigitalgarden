---
{"dateCreated":"2024-03-24 22:02","tags":["concurrency"],"pageDirection":"rtl","dg-publish":true,"permalink":"/computer-science/computer-system/simd/","dgPassFrontmatter":true}
---

# SIMD
Χ‘Χ΅Χ™Χ›Χ•Χ Χ–Χ” Χ ΧΧΧ§Χ“ Χ‘ΧΧ—Χ“ ΧΧ”Χ›ΧΧ™Χ ΧΧ‘Χ¦ΧΆ ΧΧ›Χ Χ•Χ ΧΧ§Χ‘Χ™ΧΧ™ Χ”ΧΆΧ•Χ Χ” ΧΧ©Χ SIMD - single instruction multiple data. Χ‘Χ“Χ΄Χ› ΧΧ“Χ•Χ‘Χ¨ Χ‘Χ—Χ•ΧΧ¨Χ” Χ•Χ¤Χ§Χ•Χ“Χ•Χ ΧΧΆΧ‘Χ“ (ΧΧ©ΧΧ Χ” ΧΧ¤Χ™ ISA) Χ©ΧΧ‘Χ¦ΧΆΧ•Χ ΧΧ ΧΧ•ΧΧ” Χ¤Χ§Χ•Χ“Χ” ΧΆΧ ΧΧ΅Χ¤Χ¨ Χ™Χ—Χ™Χ“Χ•Χ ΧΧ™Χ“ΧΆ Χ‘Χ‘Χ ΧΧ—Χ.

Χ”Χ“Χ™ΧΧ’Χ¨ΧΧ” Χ”Χ‘ΧΧ” ΧΧ¦Χ™Χ’Χ” ΧΧ Χ΅Χ•Χ’Χ™ Χ”ΧΧ›Χ Χ•Χ Χ”ΧΧ§Χ‘Χ™ΧΧ™ Χ”Χ§Χ™Χ™ΧΧ™Χ ΧΧ¤Χ™ [Flynn's taxonomy](https://en.wikipedia.org/wiki/Flynn%27s_taxonomy)

![Pasted image 20240324220832.png](/img/user/Assets/Pasted%20image%2020240324220832.png)

ΧΧΧ©Χ, Χ Χ•Χ›Χ ΧΧ§Χ—Χ Χ©Χ Χ™ Χ•Χ§ΧΧ•Χ¨Χ™Χ A,B Χ‘Χ’Χ•Χ“Χ 4 Χ•ΧΧ‘Χ¦ΧΆ Χ΅Χ›Χ™ΧΧ” Χ©Χ $A[i]+B[i]$ ΧΧ›Χ $i\in[0,3]$ Χ‘Χ‘Χ ΧΧ—Χ. 

![Pasted image 20240324221151.png|250](/img/user/Assets/Pasted%20image%2020240324221151.png)

## AVX
ΧΧ—Χ“ Χ”Χ¨Χ›Χ™Χ‘Χ™ Χ—Χ•ΧΧ¨Χ” Χ”ΧΆΧ™Χ§Χ¨Χ™Χ™Χ Χ‘ΧΧΆΧ¨Χ›Χ•Χ x86 ΧΧ‘Χ™Χ¦Χ•ΧΆ Χ¤Χ§Χ•Χ“Χ•Χ SIMD Χ”Χ Χ¨Χ›Χ™Χ‘Χ™ Χ”AVX Advanced Vector Extensions.

Χ Χ–Χ›Χ™Χ¨ Χ©Χ‘ [[Computer Science/Computer System/x86-64 Assembly\|x86-64 Assembly]] Χ™Χ©Χ Χ general purpose registers ΧΧ—Χ™Χ©Χ•Χ‘Χ™Χ ΧΧ¨Χ™ΧΧΧΧ™Χ™Χ Χ©Χ integers Χ‘Χ™Χ™Χ¦Χ•Χ’ signed Χ• unsigned Χ•ΧΧΧ¨Χ™ΧΧΧΧ™Χ§Χ Χ›ΧΧ•Χ‘Χ•Χ. Χ”Χ—Χ•ΧΧ¨Χ” Χ”Χ–ΧΧ ΧΧ ΧΧΧ›Χ” Χ‘Χ—Χ™Χ©Χ•Χ‘Χ™Χ ΧΧ¨Χ™ΧΧΧΧ™Χ™Χ Χ©Χ [[Floating Point\|Floating Point]] Χ‘Χ¨ΧΧ Χ”Χ—Χ•ΧΧ¨Χ”. 

ΧΧΧ—Χ¨ ΧΧ΅Χ¤Χ¨ ΧΆΧ©Χ•Χ¨Χ™Χ Χ”Χ•Χ›Χ Χ΅Χ• Χ¨Χ›Χ™Χ‘Χ™ Χ” AVX Χ©ΧΧ•ΧΧ›Χ™Χ Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” Χ©Χ ΧΧ΅Χ¤Χ¨Χ™Χ ΧΆΧ©Χ¨Χ•Χ Χ™Χ™Χ Χ•Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” __Χ•Χ§ΧΧ•Χ¨Χ™Χ__ ΧΧ•Χ§ΧΧ•Χ¨Χ™Χ Χ‘Χ’Χ•Χ“Χ Χ©Χ ΧΆΧ“ 256 Χ‘Χ™Χ. 

![Pasted image 20240324223350.png|200](/img/user/Assets/Pasted%20image%2020240324223350.png)


Χ”registers Χ”ΧΧΧ• Χ”Χ ΧΧΆΧ™Χ ΧΧ—ΧΧ™Χ£ ΧΧ›Χ ΧΧ” Χ©Χ§Χ©Χ•Χ¨ ΧΧ§Χ•Χ“ Χ©ΧΧ‘Χ¦ΧΆ ΧΧ Χ™Χ¤Χ•ΧΧ¦Χ™Χ” ΧΆΧ float Χ• double. Χ›ΧΧ• Χ©Χ™Χ© registers Χ©Χ™Χ© ΧΧ”Χ ΧΧ¤Χ§Χ™Χ“ Χ‘ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ”Χ΄Χ¨Χ’Χ™ΧΧ™ΧΧ΄ Χ©ΧΧ Χ—Χ Χ• ΧΧ›Χ™Χ¨Χ™Χ (rax Χ›ΧΆΧ¨Χ Χ”Χ—Χ–Χ¨Χ” ΧΧΧ©Χ). Χ›Χ Χ’Χ Χregisters Χ”Χ Χ΄Χ Χ™Χ© ΧΧ¤Χ§Χ™Χ“Χ™Χ

1) xmm0-ΧΧ•Χ¤Χ΅ ΧΧ Χ”ΧΧ¨Χ’Χ•ΧΧ Χ Χ”Χ¨ΧΧ©Χ•Χ Χ•Χ’Χ ΧΧ ΧΆΧ¨Χ Χ”Χ”Χ—Χ–Χ¨Χ”
2) xmm1-xmm7 - Χ”ΧΆΧ‘Χ¨Χ Χ©ΧΧ¨ Χ”ΧΧ¨Χ’Χ•ΧΧ ΧΧ™Χ ΧΧ¤Χ•Χ Χ§Χ¦Χ™Χ”
3) xmm9-xmm31- [[Computer Science/Computer System/Functions in assembly\|Χ©ΧΧ™Χ¨Χ Χ” Caller saved]].

### scalar and packed modes
Χ›Χ¤Χ™ Χ©Χ¦Χ™Χ™Χ Χ• Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ”ΧΧΧ” ΧΧ•ΧΧ›Χ™Χ Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” Χ΅Χ§ΧΧ¨Χ™Χ Χ©Χ floats Χ•Χ’Χ Χ‘ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” Χ•Χ§ΧΧ•Χ¨Χ™Χ. ΧΧ›Χ Χ” ISA Χ¦Χ¨Χ™Χ ΧΧΧΧ•Χ Χ‘Χ¤Χ§Χ•Χ“Χ•Χ Χ©ΧΧΧ¤Χ©Χ¨Χ•Χ ΧΧ—Χ•ΧΧ¨Χ” ΧΧ”Χ‘Χ™Χ Χ‘Χ©Χ‘Χ™Χ ΧΧ” ΧΧ Χ—Χ Χ• Χ¨Χ•Χ¦Χ™Χ ΧΧ”Χ©ΧΧΧ© Χ‘Χ—Χ•ΧΧ¨Χ” Χ”Χ–ΧΧ. 

ΧΧ‘Χ Χ” Χ”Χ”Χ•Χ¨ΧΧ•Χ Χ”Χ›ΧΧΧ™ ΧΆΧ‘Χ•Χ¨ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”ΧΧΧ” Χ Χ¨ΧΧ” Χ›Χ›Χ”

$$\text{<OP>}\textcolor{red}{\text{<s/p>}}\textcolor{cyan}{\text{<s/d>}}$$

* $<OP>$ -Χ”Χ¤Χ§Χ•Χ“Χ” ΧΆΧ¦ΧΧ”, Χ™Χ© Χ”ΧΧ•Χ Χ¤Χ§Χ•Χ“Χ•Χ Χ›ΧΧ• Χ”Χ–Χ–Χ” Χ©Χ ΧΆΧ¨Χ›Χ™Χ, Χ—Χ™Χ‘Χ•Χ¨, Χ—Χ™Χ΅Χ•Χ¨ Χ•Χ›Χ•Χ³. Χ›Χ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ©Χ AVX Χ™ΧΧ—Χ™ΧΧ• Χ‘ 'v' (Χ™Χ© ΧΧΆΧ¨Χ›Χ Χ™Χ©Χ Χ” Χ™Χ•ΧΧ¨ Χ©Χ Χ§Χ¨ΧΧ SSE Χ©Χ©Χ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”Χ Χ‘ΧΧ™ 'v').
* $\textcolor{red}{\text{<s/p>}}$ - Χ§Χ•Χ‘ΧΆΧ™Χ Χ”ΧΧ ΧΧ Χ—Χ Χ• Χ¨Χ•Χ¦Χ™Χ ΧΧΆΧ‘Χ•Χ“ ΧΆΧ data ΧΧ΅Χ•Χ’ scalar ΧΧ• ΧΆΧ packed 
* $\textcolor{cyan}{\text{<s/d>}}$ - single precision ΧΧ• double precision. ΧΧ¤Χ™ Χ”Χ‘Χ—Χ™Χ¨Χ” Χ”Χ–ΧΧ ΧΧ Χ—Χ Χ• Χ Χ§Χ‘ΧΆ Χ’Χ Χ›ΧΧ” ΧΆΧ¨Χ›Χ™Χ Χ™Χ© ΧΧ Χ• Χ‘Χ•Χ§ΧΧ•Χ¨ (ΧΧ ΧΆΧ•Χ‘Χ“Χ™Χ ΧΆΧ doubles ΧΧ– Χ‘Χ¨Χ’Χ™Χ΅ΧΧ¨ xmm Χ™Χ›Χ•ΧΧ™Χ ΧΧ”Χ™Χ•Χ 2 ΧΧ΅Χ¤Χ¨Χ™Χ double ΧΧ• 4 ΧΧ΅Χ¤Χ¨Χ™ float).

_Χ“Χ•Χ’ΧΧ”:_ $\text{vaddpd xmm1, xmm2}$. Χ¤Χ§Χ•Χ“Χ AVX Χ©ΧΧ‘Χ§Χ©Χ ΧΧ—Χ‘Χ¨ ΧΧ xmm1 Χ• xmm2 Χ‘packed mode Χ•ΧΆΧ double precision.

__Χ‘Χ Χ™Χ’Χ•Χ“ ΧΧ¤Χ§Χ•Χ“Χ•Χ ΧΧ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ©Χ integers, Χ›ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ™Χ›Χ•ΧΧ” Χ’Χ ΧΧ”Χ›Χ Χ΅ ΧΧ¨Χ’Χ™Χ΅ΧΧ¨ Χ©ΧΧ™Χ©Χ™ Χ©Χ Χ¨Χ¦Χ” (Χ Χ¨ΧΧ” Χ“Χ•Χ’ΧΧ” Χ‘Χ”ΧΧ©Χ)__

![Pasted image 20240324225300.png|250](/img/user/Assets/Pasted%20image%2020240324225300.png)

ΧΧ Χ Χ—ΧΧ™Χ£ Χ single precision Χ Χ§Χ‘Χ:

![Pasted image 20240324225152.png|250](/img/user/Assets/Pasted%20image%2020240324225152.png)

Χ”Χ—Χ™Χ©Χ•Χ‘Χ™Χ Χ”ΧΧ¦Χ•Χ™Χ™Χ Χ™Χ Χ‘ΧΧΧ•Χ Χ” Χ ΧΆΧ©Χ™Χ Χ‘ΧΧ•Χ¤Χ ΧΧ§Χ‘Χ™ΧΧ™ ΧΧ—ΧΧ•ΧΧ™Χ.

ΧΧ Χ”Χ™Χ™Χ Χ• ΧΧ©ΧΧΧ©Χ™Χ Χ‘ scalar mode Χ”Χ™Χ™Χ Χ• ΧΧ‘Χ¦ΧΆΧ™Χ ΧΧ Χ¤ΧΆΧ•ΧΧ Χ”Χ—Χ™Χ‘Χ•Χ¨ Χ¨Χ§ ΧΆΧ 32/64 Χ”Χ‘Χ™ΧΧ™Χ Χ”Χ¨ΧΧ©Χ•Χ Χ™Χ.
Χ”ΧΧ•Χ¤Χ¦Χ™Χ” Χ©Χ scalar Χ§Χ™Χ™ΧΧ ΧΧ›Χ™Χ•Χ•Χ Χ©Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ”ΧΧ™ΧΧ• ΧΧ™Χ•ΧΆΧ“Χ™Χ ΧΧ›Χ Χ”Χ΅Χ•Χ’Χ™Χ Χ©Χ Χ—Χ™Χ©Χ•Χ‘Χ™Χ float-point Χ•ΧΧ Χ‘Χ”Χ›Χ¨Χ— Χ—Χ™Χ©Χ•Χ‘Χ™Χ Χ•Χ§ΧΧ•Χ¨Χ™Χ™Χ.

![Pasted image 20240324225641.png|250](/img/user/Assets/Pasted%20image%2020240324225641.png)

### Χ¤Χ§Χ•Χ“Χ•Χ ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ”
Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”Χ Χ΄Χ Χ”Χ Χ¤Χ§Χ•Χ“Χ•Χ ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ” Χ‘Χ™Χ ΧΧ΅Χ¤Χ¨Χ™Χ ΧΆΧ©Χ¨Χ•Χ Χ™Χ™Χ ΧΧ΅Χ•Χ’ float ΧΧ• double (Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ packed data Χ–Χ”Χ•Χ, Χ¨Χ§ Χ¦Χ¨Χ™Χ ΧΧ©Χ Χ•Χ ΧΧ Χ” s Χ p Χ›Χ¤Χ™ Χ©Χ”Χ΅Χ‘Χ¨Χ Χ•)
![Pasted image 20240324230044.png|350](/img/user/Assets/Pasted%20image%2020240324230044.png)

* $S_{1}$ (Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ”ΧΧΧ¦ΧΆΧ™ ΧΧ‘Χ™Χ Χ”Χ©ΧΧ•Χ©Χ”) - Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ Χ’Χ Χ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ, Χ Χ–Χ›Χ™Χ¨ Χ©Χ”Χ΅Χ™Χ ΧΧ§Χ΅ ΧΧ’Χ©Χ ΧΧ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ Χ”Χ™Χ '(reg)'.
* Χ©ΧΧ¨ Χ”ΧΧ¨Χ’Χ•ΧΧ ΧΧ™Χ ΧΧ Χ™Χ›Χ•ΧΧ™Χ ΧΧ”Χ™Χ•Χ Χ›ΧΧ•Χ‘Χ ΧΧΧ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ©Χ AVX Χ‘ΧΧ‘Χ“.
* ΧΧ Χ Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ©ΧΧ™Χ©Χ™ Χ‘ΧΧ¨Χ’Χ•ΧΧ ΧΧ™Χ ΧΧ– Χ”ΧΧ•Χ¦Χ ΧΧ›Χ Χ΅ ΧΧΧ™Χ•:
	* Χ”Χ¤Χ§Χ•Χ“Χ” vmulsd %xmm0, %xmm1, %xmm4 ΧΧΆΧ©Χ” - xmm4 β† xmm1 $\cdot$ xmm0
	* Χ”Χ¤Χ§Χ•Χ“Χ” vmulps %ymm0, (%rcx), %ymm1 ΧΧΆΧ©Χ” - $ymm1 β† [b_{7}\cdotπ‘_7,β€¦,b_{1}\cdot a_{1},b_{0}\cdot a_{0}]$ Χ›ΧΧ©Χ¨ rcx ΧΧ¦Χ‘Χ™ΧΆ Χ128 Χ”Χ‘Χ™ΧΧ™Χ Χ©Χ‘Χ”Χ Χ ΧΧ¦Χ Χ”Χ•Χ§ΧΧ•Χ¨ $[b]$ . 
	* _ΧΧ ΧΧ Χ Χ™ΧΧ ΧΧ¨Χ’Χ•ΧΧ Χ Χ©ΧΧ™Χ©Χ™ Χ”ΧΧ•Χ¦ΧΧ” ΧΧ›Χ Χ΅ ΧΧΧ¨Χ’Χ•ΧΧ Χ Χ”Χ¨ΧΧ©Χ•Χ_.
* Χ Χ©Χ™Χ ΧΧ‘ Χ©ΧΧ¤Χ§Χ•Χ“Χ” sqrt ΧΧ™Χ Χ’Χ¨Χ΅Χ” ΧΆΧ 'v' Χ›Χ™ Χ–ΧΧ Χ¤Χ§Χ•Χ“Χ” Χ©Χ AVX Χ‘ΧΧ‘Χ“.
### Χ¤Χ§Χ•Χ“Χ•Χ move
Χ Χ–Χ›Χ™Χ¨ Χ©[[Computer Science/Computer System/basic commands in assembly#move to\|move]] ΧΧΧ Χ¤Χ§Χ•Χ“Χ•Χ Χ©ΧΧΧ¤Χ©Χ¨Χ•Χ ΧΧ”Χ–Χ™Χ– ΧΧ•Χ›Χ Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ ΧΧ• Χ‘Χ™Χ memory ΧΧ¨Χ’Χ™Χ΅ΧΧ¨ ΧΧ• Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χmemory. 

![Pasted image 20240324231800.png](/img/user/Assets/Pasted%20image%2020240324231800.png)
* Χ΅Χ™Χ ΧΧ§Χ΅ Χ©Χ Χ¤Χ§Χ•Χ“Χ”:
	* v-vector instruction
	* ss-scalar single
	* sd-scalar double
	* ps-packed single
	* pd-packed double
	* $M_{32}$ Χ• $M_{64}$ - ΧΧ•Χ§Χ— 64 ΧΧ• 32 Χ‘Χ™Χ ΧΧ”Χ›ΧΧ•Χ‘Χ Χ”Χ ΧΧ•Χ Χ”.
	* X ΧΧ™Χ™Χ¦Χ’ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ©Χ AVX.

* addressing mode Χ–Χ”Χ” ΧΧ¤Χ§Χ•Χ“Χ mov Χ”Χ¨Χ’Χ™Χ
	![Pasted image 20221222185500.png|450](/img/user/Assets/Pasted%20image%2020221222185500.png)

* ΧΧ™Χ“ΧΆ Χ‘Χ–Χ›Χ¨Χ•Χ Χ—Χ™Χ™Χ‘ ΧΧ”Χ™Χ•Χ [aligned](https://www.youtube.com/watch?v=OKjOZBaKlOc)ΧΧ¤Χ™ Χ”Χ’Χ•Χ“Χ Χ©Χ Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ‘Χ‘Χ™ΧΧ™Χ. Χ”Χ΅Χ™Χ‘Χ” ΧΧ›Χ Χ”Χ™Χ Χ‘Χ™Χ¦Χ•ΧΆΧ™Χ Χ©Χ§Χ©Χ•Χ¨Χ™Χ Χ[[Computer Science/Computer System/Computer System Cache Memory\|Cache]], Χ”Χ©ΧΧ™Χ¨Χ” Χ‘ cache Χ”Χ™Χ Χ‘Χ¨ΧΧ Χ”Χ‘ΧΧ•Χ§Χ™Χ Χ©Χ Χ§Χ‘ΧΆ ΧΧ¤Χ™ Χ›ΧΧ•Χ Χ”Χ‘Χ™ΧΧ™Χ Χ‘Χ›ΧΧ•Χ‘Χ Χ©ΧΧ™Χ•ΧΆΧ“Χ Χblock offset. ΧΧ›Χ ΧΧ™Χ“ΧΆ Χ©Χ”Χ•Χ ΧΧ aligned ΧΆΧΧ•Χ ΧΧ’Χ¨Χ•Χ ΧΧ›Χ Χ©data struct ΧΧ—Χ“ Χ™ΧΧ¤Χ•Χ΅ Χ©ΧΧ™ lines Χ©Χ cache. Χ“Χ‘Χ¨ Χ©Χ¤Χ•Χ’ΧΆ ΧΧΧ•Χ“ Χ‘Χ‘Χ™Χ¦Χ•ΧΆΧ™Χ. 
	* ΧΧ›Χ Χ”ΧΧ•Χ a Χ‘Χ¤Χ§Χ•Χ“Χ” ΧΧ—Χ™Χ™Χ‘ Χ©Χ”data Χ©Χ§Χ•Χ¨ΧΧ™Χ ΧΧ”Χ–Χ›Χ¨Χ•Χ Χ™Χ”Χ™Χ” aligned Χ©Χ 16 Χ‘ΧΧ™Χ (128 Χ‘Χ™ΧΧ™Χ), ΧΧ—Χ¨Χ ΧΧ–Χ›Χ¨ Χ©Χ’Χ™ΧΧ”.
	* Χ–Χ” Χ¨ΧΧ•Χ•Χ ΧΧ™ Χ¨Χ§ Χ mov Χ‘Χ™Χ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ•Χ–Χ›Χ¨Χ•Χ Χ›Χ™ Χ‘Χ™Χ Χ©Χ Χ™ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ ΧΧ™Χ ΧΧ¤Χ©Χ¨Χ•Χ Χ©Χ–Χ” Χ™Χ§Χ¨Χ”.

### Χ¤Χ§Χ•Χ“Χ•Χ conversion
__Χ”ΧΧ¨Χ” Χintegers__:
![Pasted image 20240324235921.png](/img/user/Assets/Pasted%20image%2020240324235921.png)
* v-vector instruction
* cvtt - convert with truncation Χ”ΧΧ¨Χ” ΧΆΧ Χ—Χ™ΧΧ•Χ (ΧΆΧ™Χ’Χ•Χ Χ›ΧΧ¤Χ™ ΧΧΧ”), Χ”ΧΧ§Χ¨Χ” Χ”Χ–Χ” Χ”Χ¤Χ™Χ›Χ Χ”Χ—ΧΧ§ Χ©ΧΧ™Χ™Χ¦Χ’ ΧΧ Χ”Χ©Χ‘Χ¨ Χ‘ΧΧ΅Χ¤Χ¨ Χ”ΧΆΧ©Χ¨Χ•Χ Χ™ Χ 0.
* ss2si - ΧΧ΅Χ¤Χ¨ float Χ int
* sd2si- ΧΧ΅Χ¤Χ¨ double Χ int 
* ss2siq, sd2siq - ΧΧ΅Χ¤Χ¨ double Χ quad word integer.
* Χ” source Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ register X Χ›ΧΧ•ΧΧ¨ ΧΧ΅Χ•Χ’ AVX ΧΧ• Χ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ Χ©ΧΧ¤Χ Χ” Χ float ΧΧ• double 
* Χ”Χ™ΧΆΧ“ Χ”Χ•Χ ΧΧΧ™Χ“ register Χ©Χ 32 ΧΧ• 64 Χ‘Χ™Χ Χ¨Χ’Χ™Χ.

![Pasted image 20240325000839.png|300](/img/user/Assets/Pasted%20image%2020240325000839.png)
1) Χ”Χ§Χ•Χ“ ΧΧ–Χ™Χ– ΧΧ”Χ›ΧΧ•Χ‘Χ Χ©Χ‘Χ” val Χ ΧΧ¦Χ ΧΧ Χ”ΧΧ•Χ›Χ Χ©ΧΧ• Χ xmm0.
2) ΧΧΧ‘Χ¦ΧΆ Χ”ΧΧ¨Χ” Χ xmm1 ΧΧΧ΅Χ¤Χ¨ quad word Χ©ΧΧ•ΧΧ• Χ©ΧΧ™Χ Χ‘ rdi.

__Χ”ΧΧ¨Χ” Χinteger Χfloat/double__
![Pasted image 20240325001046.png](/img/user/Assets/Pasted%20image%2020240325001046.png)
* v - vector
* cvt - convert
* si2ss/sd - Χ”ΧΧ¨Χ” Χ single ΧΧ• double
* q - ΧΧ΅ΧΧ Χ©Χ’Χ•Χ“Χ Χ” int Χ”Χ•Χ quad word.
* Χ ΧΧΆΧΧ Χ source 2 ΧΧ¨Χ•Χ‘, Χ¤Χ©Χ•Χ Χ Χ©Χ™Χ Χ’Χ Χ‘ source 2 Χ•Χ’Χ Χ‘ destination ΧΧ ΧΧ•ΧΧ• Χ¨Χ’Χ™Χ΅ΧΧ¨. 
![Pasted image 20240325002556.png](/img/user/Assets/Pasted%20image%2020240325002556.png)

__Χ”ΧΧ¨Χ” Χ float Χ double__
ΧΧ¤Χ©Χ¨ Χ’Χ ΧΧ”ΧΧ™Χ¨ ΧΧ΅Χ¤Χ¨Χ™Χ ΧΆΧ©Χ¨Χ•Χ Χ™Χ™Χ Χ•ΧΧ©Χ Χ•Χ ΧΧ Χ¨ΧΧ Χ”Χ“Χ™Χ•Χ§ Χ©ΧΧ”Χ Χ‘ΧΧ•Χ¤Χ Χ”Χ‘Χ 

![Pasted image 20240325002944.png](/img/user/Assets/Pasted%20image%2020240325002944.png)
* vcvtpd2ps - ΧΧ•Χ§Χ—Χ double Χ•ΧΧΧ™Χ¨Χ” Χfloat 
* vcvtss2sd - ΧΧ•Χ§Χ float Χ•ΧΧΧ™Χ¨Χ” Χdouble.

==_Χ”Χ΅Χ™Χ‘Χ” Χ©Χ‘ΧΧ¤Χ•Χ¨ Χ Χ¨ΧΧ” Χ›ΧΧ™ΧΧ• ΧΆΧ‘Χ¨Χ Χ• ΧΧΧΆΧ¨Χ Χ‘Χ’Χ•Χ“Χ 4 ΧΧΧΆΧ¨Χ Χ‘Χ’Χ•Χ“Χ 2 Χ›ΧΧ©Χ¨ Χ”ΧΧ¨Χ Χ• Χ double Χ•Χ”Χ¤Χ•Χ Χ›ΧΧ©Χ¨ Χ”ΧΧ¨Χ Χ• Χ float Χ”Χ™Χ Χ©Χ‘Χ¤Χ•ΧΆΧ Χ–Χ” Χ‘ΧΧΧ ΧΧ” Χ©Χ§Χ•Χ¨Χ”, Χ‘Χ’ΧΧ Χ©ΧΧ“Χ•Χ‘Χ¨ Χ’Χ Χ‘Χ•Χ§ΧΧ•Χ¨Χ™Χ ΧΧΧ¨Χ Χ• Χ©Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ ΧΧ™ Χ‘double Χ©ΧΧ™ ΧΧ΅Χ¤Χ¨Χ™Χ Χ•Χ‘ float ΧΧ¨Χ‘ΧΆΧ”, ΧΧ‘Χ ΧΧ ΧΧ Χ™ ΧΧΧ™Χ¨ ΧΧ Χ™ ΧΧ• ΧΧ¨Χ¤Χ΅ Χ‘ΧΧ¤Χ΅Χ™Χ ΧΧ• ΧΧ•Χ•ΧΧ¨ ΧΆΧ Χ©ΧΧ™ Χ”ΧΧ΅Χ¤Χ¨Χ™Χ Χ‘Χ‘ΧΧ™Χ Χ”Χ’Χ‘Χ•Χ”Χ™Χ_==

Χ›ΧΧ•Χ‘Χ Χ©Χ”Χ¤ΧΆΧ•ΧΧ” Χ”Χ–ΧΧ ΧΆΧΧ•ΧΧ” ΧΧ’Χ¨Χ•Χ ΧΧ Χ• ΧΧ• ΧΧΧ‘Χ“ Χ“Χ™Χ•Χ§ Χ©Χ Χ”ΧΧ΅Χ¤Χ¨ ΧΧ• ΧΧ”Χ¨Χ—Χ™Χ‘ ΧΧ Χ”Χ“Χ™Χ•Χ§ Χ©ΧΧ• Χ‘ΧΧ—Χ™Χ¨ Χ©Χ ΧΆΧ•Χ“ 4 Χ‘ΧΧ™Χ. 

__Χ“Χ•Χ’ΧΧ”__
Χ Χ΅ΧΧ›Χ ΧΆΧ Χ§ΧΧΆ Χ”Χ§Χ•Χ“ Χ”Χ‘Χ
```C
double func(double w, int x, float y, long z) {
	return y*x - w/z;
}
```

Χ Χ©Χ™Χ ΧΧ‘ ΧΧ›ΧΧ” Χ“Χ’Χ©Χ™Χ:
* x Χ• z Χ Χ©ΧΧ¨Χ™Χ Χ‘ rdi Χ• rsi Χ‘Χ”ΧΧΧΧ”.
* w Χ• y Χ Χ©ΧΧ¨Χ™Χ Χ‘ xmm0 Χ• xmm1 Χ‘Χ”ΧΧΧΧ”.
* $y \cdot x$ Χ–Χ” Χ—Χ™Χ©Χ•Χ‘ Χ©ΧΧΆΧ¨Χ‘ int Χ• float Χ•ΧΧ›Χ Χ¦Χ¨Χ™Χ ΧΧ”ΧΧ™Χ¨ ΧΧ x Χ float.
* ΧΧ—Χ ΧΧ•ΧΧ• Χ”Χ΅Χ‘Χ¨ Χ¦Χ¨Χ™Χ ΧΧ”ΧΧ™Χ¨ ΧΧ z Χ double.
* Χ¤ΧΆΧ•ΧΧ Χ”Χ—Χ™Χ΅Χ•Χ¨ Χ”Χ™Χ Χ‘Χ™Χ float Χ double Χ•ΧΧ›Χ Χ¦Χ¨Χ™Χ ΧΧ”ΧΧ™Χ¨ ΧΧ Χ” float Χ double

```assembly
func: 
	vcvtsi2ss edi, xmm2, xmm2 
	vmulss xmm1, xmm2, xmm1
	vcvtss2sd xmm1,xmm2
	vcvtsi2sdq rsi xmm1, xmm1
	vdivsd xmm1, xmm0, xmm0
	vsubsd xmm0 xmm2 xmm0
	ret
```

1) Χ”Χ©Χ•Χ¨Χ” Χ”Χ¨ΧΧ©Χ•Χ Χ” ΧΧΧ™Χ¨Χ” ΧΧ x Χfloat Χ•Χ©ΧΧ” ΧΧ•ΧΧ• Χ‘ xmm2
2) Χ”Χ©Χ•Χ¨Χ” Χ”Χ©Χ Χ™Χ™Χ” ΧΧ›Χ¤Χ™ΧΧ” Χ‘Χ™Χ y Χ x Χ•Χ©ΧΧ” ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ‘ xmm1 
3) Χ”Χ©Χ•Χ¨Χ” Χ”Χ©ΧΧ™Χ©Χ™Χ ΧΧΧ™Χ¨Χ” Χ double ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ•Χ©ΧΧ” Χ‘ xmm1. 
4) Χ”Χ©Χ•Χ¨Χ” Χ”Χ¨Χ‘Χ™ΧΆΧ™Χ ΧΧΧ™Χ¨Χ” ΧΧ z Χ double 
5) Χ”Χ©Χ•Χ¨Χ” Χ”Χ—ΧΧ™Χ©Χ™Χ Χ•Χ”Χ©Χ™Χ©Χ™Χ ΧΧ‘Χ¦ΧΆΧ•Χ ΧΧ Χ”Χ—Χ™ΧΧ•Χ§ Χ•Χ”Χ›Χ¤Χ. 

__Χ“Χ•Χ’ΧΧ” 2:__
```assembly
.section .data .align 16
	val: .float 42.42

.text 
.globl main

main:
	vmovss val(%rip), %xmm0 # xmm0 <- [0,0,0,42.42]
	vcvttss2si %xmm0, %eax # eax <- 42
	ret 
```

1) vmovss - ΧΧ›Χ Χ™Χ΅Χ™Χ ΧΧΧ•Χ Χ”Χ•Χ§ΧΧ•Χ¨ xmm0 ΧΧ Χ”ΧΧ•Χ›Χ Χ©ΧΧ” Χ©Χ ΧΧ¦Χ Χ‘Χ›ΧΧ•Χ‘Χ Χ©Χ val Χ‘ relative address mode Χ›ΧΧ•ΧΧ¨ Χ”Χ›ΧΧ•Χ‘Χ Χ©Χ val Χ”Χ™Χ Χ¨ΧΧΧ™Χ‘Χ™Χ ΧΧΆΧ¨Χ Χ©Χ rip. Χ–Χ” ΧΧΧ¤Χ©Χ¨ ΧΧ§Χ•Χ“ ΧΧ”Χ™Χ•Χ position independent, Χ›ΧΧ•ΧΧ¨, ΧΧ™Χ Χ¦Χ•Χ¨Χ ΧΧ—Χ©Χ•Χ© Χ©Χ”Χ›ΧΧ•Χ‘Χ Χ©val ΧΧ§Χ‘Χ ΧΧ ΧΧ”Χ™Χ” Χ§Χ™Χ™ΧΧ Χ‘Χ™Χ Χ¨Χ™Χ¦Χ•Χ Χ©Χ ΧΧ•Χ›Χ Χ™Χ•Χ
2) vcvttss2si- Χ¤Χ§Χ•Χ“Χ” Χ©ΧΧΧ™Χ¨Χ” float Χ int Χ•Χ©ΧΧ” ΧΧ•ΧΧ• Χ‘ eax.
### constants
Χ‘ AVX ΧΧ Χ Χ™ΧΧ ΧΧ¨Χ©Χ•Χ immediate Χ›ΧΧ• Χ‘registers Χ”Χ¨Χ’Χ™ΧΧ™Χ Χ‘Χ¤ΧΆΧ•ΧΧ•Χ ΧΧ¨Χ™ΧΧΧΧ™Χ•Χ. ΧΧ›Χ Χ™Χ© Χ¦Χ•Χ¨Χ ΧΧΧΆΧ•Χ ΧΧ•ΧΧ Χ™Χ©Χ™Χ¨Χ•Χ ΧΧ”Χ–Χ›Χ¨Χ•Χ. 
Χ”Χ©ΧΧ™Χ¨Χ” Χ‘Χ–Χ›Χ¨Χ•Χ ΧΧΆΧ©Χ” ΧΧ• ΧΆΧ Χ™Χ“Χ™ Χ©ΧΧ™Χ¨Χ Χ”Χ™Χ™Χ¦Χ•Χ’ Χ”Χ‘Χ™Χ ΧΧ¨Χ™ $.byte$ ΧΧ• ΧΆΧ Χ™Χ“Χ™ Χ©ΧΧ™Χ¨Χ Χ”ΧΧ΅Χ¤Χ¨ Χ”Χ©ΧΧ Χ›Χ¤Χ™ Χ©ΧΧ•ΧΧ Χ‘Χ™ΧΧ™Χ Χ”Χ™Χ• ΧΧ™Χ™Χ¦Χ’Χ™Χ ΧΧ•ΧΧ• Χ‘ IEEE. 

ΧΧΧ©Χ ΧΆΧ‘Χ•Χ¨ Χ”Χ¤Χ•Χ Χ§Χ¦Χ™Χ” 
```C
double f(double temp) {
	return 1.8 * temp + 32.0;
}
```

Χ”Χ§Χ•Χ“ Χ™Χ¨ΧΧ” Χ›Χ›Χ” 
![Pasted image 20240325011330.png|350](/img/user/Assets/Pasted%20image%2020240325011330.png)
Χ”Χ΅Χ™Χ‘Χ” Χ©Χ›ΧΧ Χ©ΧΧ¨Χ Χ• Χ”4 Χ‘ΧΧ™Χ Χ‘Χ Χ¤Χ¨Χ“ Χ”Χ™Χ Χ‘Χ’ΧΧ [[Computer Science/Computer System/Little and Big Endian\|endianness]]. Χ”Χ™Χ” ΧΧ¤Χ©Χ¨ Χ’Χ ΧΧ©ΧΧ•Χ¨ ΧΧ Χ›Χ Χ”8 Χ‘ΧΧ™Χ Χ‘Χ‘Χ ΧΧ—Χ ΧΧ‘Χ Χ”Χ™Χ” Χ¦Χ¨Χ™Χ ΧΧ©Χ™Χ Χ©Χ”Χ™Χ™Χ¦Χ•Χ’ Χ¦Χ¨Χ™Χ ΧΧ”Χ™Χ•Χ ΧΧ¤Χ™ Χ”ΧΧ™Χ Χ“Χ™ΧΧ Χ™Χ•Χ Χ©Χ Χ”ΧΧΆΧ¨Χ›Χ.
### bitwise
![Pasted image 20240325102933.png|350](/img/user/Assets/Pasted%20image%2020240325102933.png)
Χ¦Χ¨Χ™Χ ΧΧ©Χ™Χ ΧΧ‘ Χ©Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”Χ Χ΄Χ ΧΆΧ•Χ‘Χ“Χ•Χ ΧΆΧ packed data Χ•ΧΧ›Χ Χ”Χ ΧΧΆΧ“Χ›Χ Χ•Χ ΧΧ Χ›Χ Χ”Χ‘ΧΧ™Χ Χ‘ xmm registers Χ’Χ ΧΧ Χ”Χ©ΧΧΧ©Χ Χ• Χ¨Χ§ Χ‘Χ—ΧΧ§ ΧΧ”Χ.

![Pasted image 20240325104535.png|300](/img/user/Assets/Pasted%20image%2020240325104535.png)
Χ§ΧΧΆ Χ”Χ§Χ•Χ“ Χ”Χ‘Χ Χ”Χ•Χ¤Χ ΧΧ΅Χ¤Χ¨Χ™Χ Χ‘Χ•Χ§ΧΧ•Χ¨ ΧΧΧ¦Χ•Χ¨Χ” Χ”Χ©ΧΧ™ΧΧ™Χ Χ©ΧΧ”Χ Χ‘ΧΧΧ¦ΧΆΧ•Χ xor. Χ”ΧΧ΅Χ¤Χ¨Χ™Χ Χ©Χ¨Χ©Χ•ΧΧ™Χ Χ©Χ Χ¤Χ©Χ•Χ ΧΧ¨Χ›Χ™Χ‘Χ™Χ ΧΧ΅Χ¤Χ¨ Χ‘Χ™Χ ΧΧ¨Χ™ Χ©Χ” MSB Χ©ΧΧ• Χ”Χ•Χ 1 Χ•Χ›Χ Χ”Χ©ΧΧ¨ ΧΧ¤Χ΅Χ™Χ. ΧΧ›Χ Χ”Χ•Χ Χ™Χ”Χ¤Χ•Χ ΧΧ Χ”Χ‘Χ™Χ Χ΅Χ™ΧΧ ΧΆΧ‘Χ•Χ¨ Χ›Χ float Χ‘Χ•Χ§ΧΧ•Χ¨ Χ•Χ›Χ Χ”Χ©ΧΧ¨ Χ™Χ—Χ–Χ™Χ¨ ΧΧ ΧΧ•ΧΧ• Χ”ΧΆΧ¨Χ Χ©Χ Χ”Χ‘Χ™Χ Χ©Χ”Χ™Χ” ΧΧ§Χ•Χ“Χ Χ‘ΧΆΧ Χ‘Χ™Χ¦Χ•ΧΆ xor. 

### Comparison
![Pasted image 20240325104901.png|300](/img/user/Assets/Pasted%20image%2020240325104901.png)

*  S2 Χ—Χ™Χ™Χ‘ ΧΧ”Χ™Χ•Χ xmm.
* S1 Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ Χ’Χ Χ›ΧΧ•Χ‘Χ Χ–Χ›Χ¨Χ•Χ.
* Χ”Χ¤ΧΆΧ•ΧΧ” Χ”Χ–ΧΧ ΧΧ“ΧΧ™Χ§Χ” ΧΧ Χ” EFlags registers Χ”ΧΧ•Χ›Χ¨Χ™Χ Χ•ΧΧ“ΧΧ™Χ§Χ” Χ’Χ Χ›ΧΧ” flags Χ¤Χ—Χ•Χ ΧΧ•Χ›Χ¨Χ™Χ 
	* unordered ΧΧ ΧΧ—Χ“ Χ”ΧΧ΅Χ¤Χ¨Χ™Χ Χ”Χ•Χ NAN 
	* parity ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ”Χ™Χ NAN

![Pasted image 20240325105229.png|200](/img/user/Assets/Pasted%20image%2020240325105229.png)

Χ Χ¨ΧΧ” Χ§Χ•Χ“ c Χ©Χ‘Χ•Χ“Χ§ Χ”ΧΧ ΧΧ΅Χ¤Χ¨ Χ”Χ•Χ NAN Χ•ΧΧ™Χ Χ–Χ” Χ ΧΆΧ©Χ” Χ‘ΧΧ΅ΧΧ‘ΧΧ™

```C
f(float x) {
	if(x<0) return -1;
	if(x==0) return 0;
	if(x>0) return 1;
	if(isnan(x)) return 2;
}
```

![Pasted image 20240325111650.png|350](/img/user/Assets/Pasted%20image%2020240325111650.png)

Χ”Χ§Χ•Χ“ Χ‘Χ•Χ“Χ§ ΧΧ jp Χ“Χ•ΧΧ§ (parity flag) Χ•ΧΧ Χ›Χ Χ”Χ•Χ Χ§Χ•Χ¤Χ¥ ΧΧ§Χ•Χ“ NaN Χ•ΧΧ—Χ–Χ™Χ¨Χ™Χ 2.

__Printf ΧΆΧ float numbers__
Χ Χ΅ΧΧ›Χ Χ‘Χ§Χ•Χ“ Χ”ΧΧ΅ΧΧ‘ΧΧ™ Χ”Χ‘Χ 

![Pasted image 20240327000906.png|300](/img/user/Assets/Pasted%20image%2020240327000906.png)

1) Χ”Χ§Χ•Χ“ ΧΧΆΧΧ™Χ§ ΧΧ”Χ–Χ›Χ¨Χ•Χ ΧΧ Χ”ΧΆΧ¨Χ›Χ™Χ Χ xmm0 Χ• xmm1 Χ‘ΧΧ¦Χ•Χ¨Χ packed double.
2) ΧΧ—Χ‘Χ¨Χ™Χ Χ‘Χ¦Χ•Χ¨Χ” ΧΧ§Χ‘Χ™ΧΧ™Χ Χ‘Χ™Χ Χ©Χ Χ™ Χ”Χ•Χ§ΧΧ•Χ¨Χ™Χ.
3) ΧΧΆΧΧ™Χ§Χ™Χ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ©Χ ΧΧ¦ΧΧ Χ‘ xmm0 Χ xmm1
4) _ΧΧ–Χ™Χ–Χ™Χ ΧΧ xmm1, Χ©ΧΧ•Χ Χ” Χ‘ΧΧ™Χ Χ™ΧΧ™Χ Χ”_- ΧΧ Χ–Χ” ΧΆΧ•Χ©Χ™Χ Χ›Χ“Χ™ ΧΧ—ΧΧ¥ ΧΧ Χ”ΧΆΧ¨Χ Χ”Χ©Χ Χ™ Χ‘Χ•Χ§ΧΧ•Χ¨.
	1) fmt Χ”Χ•Χ Χ”Χ¤Χ•Χ¨ΧΧ Χ©printf ΧΧ§Χ‘Χ Χ•Χ”Χ•Χ ΧΧ“Χ¤Χ™Χ΅ Χ©Χ Χ™ floats, Χ‘ΧΧ¦Χ‘ Χ–Χ” printf ΧΧ—Χ¤Χ© ΧΧ•ΧΧ Χ‘ low ordered bytes Χ©Χ xmm0 Χ• xmm1 Χ›Χ™ printf ΧΧΧ™Χ™Χ—Χ΅ ΧΧ•Χ§ΧΧ•Χ¨Χ™Χ Χ”ΧΧΧ” Χ›Χ΅Χ§ΧΧ¨.
5) ΧΧΆΧ‘Χ™Χ¨Χ™Χ ΧΧ Χ”ΧΧ™Χ“ΧΆ Χ©Χ¦Χ¨Χ™Χ Χ›ΧΧ• ΧΧ΅Χ¤Χ¨ Χ”ΧΧ¨Χ’Χ•ΧΧ ΧΧ™Χ Χ•Χ”Χ¤Χ•Χ¨ΧΧ Χ printf Χ•ΧΧ¤ΧΆΧ™ΧΧ™Χ ΧΧ•ΧΧ•.
6) Χ Χ©Χ™Χ ΧΧ‘ Χ©Χ”Χ©ΧΧΧ©Χ Χ• Χ‘ align Χ›Χ“Χ™ ΧΧΧ Χ•ΧΆ Χ”ΧΧ Χ”Χ’Χ•Χ ΧΧ Χ¦Χ¤Χ•Χ™Χ” Χ›Χ¤Χ™ Χ©Χ¦Χ™Χ™Χ Χ• Χ›Χ‘Χ¨ Χ©Χ™Χ›Χ•Χ ΧΧ§Χ¨Χ•Χ. 

### Χ—Χ™Χ©Χ•Χ‘Χ™Χ ΧΧ¨Χ™ΧΧΧΧ™Χ™Χ 
Χ Χ—Χ©Χ‘ ΧΧ Χ”Χ Χ•Χ΅Χ—Χ” Χ©Χ [[Computer Science/Probability/Further Topics on Random Variables#Χ§Χ•Χ Χ‘Χ•ΧΧ•Χ¦Χ™Χ™Χ”, Χ©Χ•Χ Χ•Χ ΧΧ©Χ•ΧΧ¤Χ , Χ¤Χ•Χ Χ§Χ¦Χ™Χ•Χ ΧΆΧ ΧΧ΄Χ Χ•ΧΆΧ•Χ“\|Χ©Χ•Χ Χ•Χ ΧΧ©Χ•ΧΧ¤Χ]] .

![Pasted image 20240327001401.png|300](/img/user/Assets/Pasted%20image%2020240327001401.png)

Χ‘Χ§Χ•Χ“ c Χ΅Χ“Χ¨ΧΧ™ Χ”Χ¤ΧΧ¨Χ•Χ Χ“Χ™ Χ¤Χ©Χ•Χ 
```C
#include <math.h>
double corr ( double x[ ], double y[ ], long n ) { 
   double sum_x, sum_y, sum_xx, sum_yy, sum_xy; 
   sum_x = sum_y = sum_xx = sum_yy = sum_xy = 0.0; 

   for (long i = 0; i < n; i++ ) { 
        sum_x += x[i]; 
        sum_y += y[i]; 
        sum_xx += x[i]*x[i]; 
        sum_yy += y[i]*y[i];      
        sum_xy += x[i]*y[i]; 
   } 

   return (n*sum_xy-sum_x*sum_y) / 
                sqrt((n*sum_xx-sum_x*sum_x) * 
                (n*sum_yy-sum_y*sum_y)); 
}
```

Χ Χ©Χ™Χ ΧΧ‘ ΧΧ¨ΧΧ– Χ©ΧΧΧ¤Χ©Χ¨ ΧΧ Χ• ΧΧ”Χ‘Χ™Χ Χ©Χ Χ™ΧΧ ΧΧ”Χ©ΧΧΧ© Χ‘Χ¨Χ›Χ™Χ‘Χ™ AVX ΧΧ™Χ™ΧΆΧ•Χ Χ”ΧΧΧ’Χ•Χ¨Χ™ΧΧ -
Χ™Χ© Χ›ΧΧ ΧΧ΅Χ¤Χ¨ Χ΅Χ›Χ•ΧΧ™Χ Χ©ΧΧ¦ΧΧ‘Χ¨Χ™Χ Χ‘Χ›Χ ΧΧ™ΧΧ¨Χ¦Χ™Χ” Χ‘Χ Χ¤Χ¨Χ“ Χ•ΧΧ‘Χ΅Χ•Χ£ ΧΧΧ—Χ‘Χ¨Χ™Χ Χ‘Χ™Χ—Χ΅ Χ‘ΧΧ™Χ–Χ©Χ”Χ• ΧΧ•Χ¤Χ.

Χ”Χ¨ΧΆΧ™Χ•Χ:
1) xmm0 Χ™Χ›Χ™Χ Χ‘Χ›Χ Χ¤ΧΆΧ Χ–Χ•Χ’ ΧΧ”Χ΅Χ›Χ•Χ Χ©Χ $x$ 
2) xmm1 Χ™Χ›Χ™Χ Χ‘Χ›Χ Χ¤ΧΆΧ Χ–Χ•Χ’ ΧΧ”Χ΅Χ›Χ•Χ Χ©Χ y
3) xmm2 Χ™Χ›Χ™Χ Χ‘Χ›Χ Χ¤ΧΆΧ Χ–Χ•Χ’ ΧΧ”Χ΅Χ›Χ•Χ Χ©Χ $x^{2}$ 
4) xmm3 Χ™Χ›Χ™Χ Χ‘Χ›Χ Χ¤ΧΆΧ Χ–Χ•Χ’ ΧΧ”Χ΅Χ›Χ•Χ Χ©Χ $y^{2}$ 
5) xmm4 Χ™Χ›Χ™Χ Χ‘Χ›Χ Χ¤ΧΆΧ Χ–Χ•Χ’ ΧΧ”Χ΅Χ›Χ•Χ Χ©Χ xy 
6) Χ Χ•Χ›Χ ΧΧΆΧ¦Χ•Χ¨ Χ›ΧΧ Χ•ΧΧ‘Χ Χ•Χ ΧΧ•ΧΧΧ” Χ©Χ›Χ Χ¤ΧΆΧ Χ–Χ–Χ” Χ‘Χ§Χ¤Χ™Χ¦Χ•Χ Χ©Χ 8 Χ‘ΧΧ™Χ ΧΧ• ΧΧΆΧ©Χ•Χ loop unroll Χ•ΧΧ”Χ©ΧΧΧ© Χ‘ΧΆΧ•Χ“ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ›Χ“Χ™ ΧΧ¦Χ‘Χ•Χ¨ ΧΧ Χ”ΧΧ™Χ‘Χ¨Χ™Χ Χ”Χ‘ΧΧ™Χ Χ•ΧΧ–Χ•Χ– Χ‘Χ§Χ¤Χ™Χ¦Χ•Χ Χ©Χ 16 Χ‘ΧΧ™Χ Χ•ΧΧ£ Χ™Χ•ΧΧ¨. 
7) Χ‘Χ΅Χ•Χ¤Χ• Χ©Χ Χ“Χ‘Χ¨, Χ›Χ ΧΧ™Χ‘Χ¨ Χ‘Χ•Χ§ΧΧ•Χ¨Χ™Χ Χ©Χ Χ©ΧΧΧ© Χ‘Χ”Χ Χ™Χ›Χ™Χ ΧΧ Χ”Χ΅Χ›Χ™ΧΧ” Χ©Χ Χ”ΧΧ™Χ‘Χ¨Χ™Χ Χ”Χ–Χ•Χ’Χ™Χ™Χ Χ‘ΧΧ™Χ§Χ•Χ Χ”Χ¨ΧΧ©Χ•Χ Χ•Χ‘ΧΧ™Χ§Χ•Χ Χ”Χ©Χ Χ™ ΧΧ Χ”Χ΅Χ›Χ™ΧΧ” Χ©Χ Χ”ΧΧ™Χ‘Χ¨Χ™Χ Χ”ΧΧ™ Χ–Χ•Χ’Χ™Χ™Χ (ΧΧ Χ Χ‘Χ¦ΧΆ loop unroll ΧΧ– Χ”Χ§Χ¤Χ™Χ¦Χ•Χ Χ‘Χ›Χ ΧΧ™Χ‘Χ¨ Χ‘Χ•Χ§ΧΧ•Χ¨ Χ™Χ”Χ™Χ• Χ’Χ“Χ•ΧΧ•Χ Χ™Χ•ΧΧ¨ ΧΧ–Χ•Χ’Χ™Χ™Χ Χ•ΧΧ™ Χ–Χ•Χ’Χ™Χ™Χ).
8) ΧΧ‘Χ¦ΧΆΧ™Χ ΧΧ Χ”loop unroll Χ‘ΧΧ•Χ¤Χ Χ›Χ–Χ” Χ©ΧΧ”Χ™Χ” Χ—Χ•Χ§Χ™Χ•Χ Χ‘Χ™Χ Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ, ΧΧΧ©Χ xmm0 Χ• xmm8 Χ™Χ›Χ™ΧΧ• ΧΧ Χ”Χ΅Χ›Χ•ΧΧ™Χ Χ©Χ x  Χ•Χ’Χ xmm1 Χ• xmm9 Χ™Χ›Χ™ΧΧ• ΧΧ Χ”Χ΅Χ›Χ•ΧΧ™Χ Χ©Χ y Χ•Χ›Χ Χ”ΧΧΧ” (Χ‘Χ§Χ¤Χ™Χ¦Χ•Χ Χ©Χ 8).

![Pasted image 20240327010629.png|300](/img/user/Assets/Pasted%20image%2020240327010629.png)
![Pasted image 20240327010710.png|300](/img/user/Assets/Pasted%20image%2020240327010710.png)

Χ‘Χ΅Χ•Χ£ Χ”ΧΧ™ΧΧ¨Χ¦Χ™Χ•Χ Χ Χ§Χ‘Χ Χ‘ΧΆΧ¨Χ ΧΧ©Χ”Χ• Χ›Χ–Χ”

![Pasted image 20240327010755.png|300](/img/user/Assets/Pasted%20image%2020240327010755.png)

Χ•Χ›ΧΆΧ Χ Χ•Χ›Χ ΧΧ΅Χ›Χ•Χ ΧΧ Χ›Χ•ΧΧ Χ‘Χ™Χ—Χ“

![Pasted image 20240327011252.png|300](/img/user/Assets/Pasted%20image%2020240327011252.png)

__horizontal add__ 
Χ›ΧΆΧ ΧΧ—ΧΧ§ Χ”ΧΧ—Χ¨Χ•Χ Χ©Χ Χ©ΧΧ¨, ΧΧ—Χ‘Χ¨ ΧΧ Χ”ΧΧ™Χ‘Χ¨ Χ”Χ¨ΧΧ©Χ•Χ Χ‘Χ›Χ Χ•Χ§ΧΧ•Χ¨ ΧΆΧ Χ”ΧΧ™Χ‘Χ¨ Χ”Χ©Χ Χ™ Χ©ΧΧ•, ΧΧ©Χ™Χ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ‘8 Χ”Χ‘ΧΧ™Χ Χ”Χ¨ΧΧ©Χ•Χ Χ™Χ Χ•ΧΧ§Χ‘Χ ΧΧ΅Χ¤Χ¨ double Χ©Χ”Χ•Χ Χ”ΧΧ•Χ¦ΧΧ” Χ‘Χ›Χ Χ”Χ¨Χ¦Χ•Χ™Χ” ΧΧ›Χ Χ—ΧΧ§ (ΧΧΆΧ™Χ ΧΧΆΧ‘Χ¨ Χ‘Χ™Χ packed Χ scalar). 

ΧΧ Χ–Χ” Χ ΧΆΧ©Χ” ΧΆΧ Χ”Χ¤Χ§Χ•Χ“Χ” haddpd. Χ”Χ§ΧΧ Χ©ΧΧ” Χ”Χ•Χ Χ©Χ Χ™ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ/ Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ•Χ•Χ§ΧΧ•Χ¨ Χ•Χ”Χ™Χ ΧΧ‘Χ¦ΧΆΧ Χ‘Χ™Χ“Χ™Χ•Χ§ ΧΧ Χ”Χ Χ΄Χ ΧΆΧ‘Χ•Χ¨Χ Χ•Χ©ΧΧ” ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ‘Χ›Χ ΧΧ™Χ‘Χ¨ Χ‘Χ•Χ§ΧΧ•Χ¨ Χ”Χ§ΧΧ Χ”Χ¨ΧΧ©Χ•Χ.

![Pasted image 20240327011700.png|250](/img/user/Assets/Pasted%20image%2020240327011700.png)
![Pasted image 20240327011640.png|250](/img/user/Assets/Pasted%20image%2020240327011640.png)

Χ›ΧΆΧ Χ›Χ Χ©Χ Χ©ΧΧ¨ ΧΧΆΧ©Χ•Χ Χ”Χ•Χ
1) ΧΧ”ΧΧ™Χ¨ ΧΧ n Χdouble Χ‘ΧΧΧ¦ΧΆΧ•Χ cvtsi2sd (convert scalar int to scalar double).
2) ΧΧ‘Χ¦ΧΆ ΧΧ Χ¤ΧΆΧ•ΧΧ•Χ Χ”Χ›Χ¤Χ Χ•Χ”Χ—Χ™ΧΧ•Χ§ ΧΆΧ Χ”ΧΧ•Χ¦ΧΧ•Χ Χ©Χ”ΧΧ§Χ‘ΧΧ• Χ›ΧΧ•Χ¦ΧΧ” Χhadd Χ•ΧΧ”Χ—Χ–Χ™Χ¨ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ‘ xmm0

![Pasted image 20240327110808.png|300](/img/user/Assets/Pasted%20image%2020240327110808.png)
![Pasted image 20240327110831.png|300](/img/user/Assets/Pasted%20image%2020240327110831.png)


Χ”Χ§Χ•Χ“ Χ”Χ Χ΄Χ ΧΧ©ΧΧΧ© Χ‘Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ”Χ‘Χ΅Χ™Χ΅Χ™Χ™Χ Χ‘Χ™Χ•ΧΧ¨ Χ‘Χ’Χ•Χ“Χ 128 Χ‘Χ™Χ. Χ™Χ›ΧΧ Χ• ΧΧ”Χ©ΧΧΧ© Χ‘Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ©Χ AVX (ymm) Χ›Χ“Χ™ ΧΧ©Χ¤Χ¨ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” ΧΧ£ Χ™Χ•ΧΧ¨ 
1) ΧΧ”Χ—ΧΧ™Χ£ ΧΧ Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ xmmi Χ‘ ymmi.
2) ΧΧ”Χ•Χ΅Χ™Χ£ v ΧΧ¤Χ Χ™ Χ›Χ Χ¤Χ§Χ•Χ“Χ•Χ Χ”ΧΧ¨Χ™ΧΧΧΧ™Χ§Χ”
3) ΧΧ”Χ©ΧΧΧ© Χ‘ vhaddpd - Χ›ΧΆΧ Χ™Χ© 4 ΧΆΧ¨Χ›Χ™Χ Χ‘Χ•Χ§ΧΧ•Χ¨ ΧΧ– Χ”Χ¤Χ§Χ•Χ“Χ” Χ΅Χ•Χ›ΧΧ ΧΧ Χ”Χ©Χ Χ™Χ™Χ Χ”Χ¨ΧΧ©Χ•Χ Χ™Χ Χ•Χ©ΧΧ” ΧΧ•ΧΧ Χ‘ΧΧ§Χ•Χ Χ”Χ¨ΧΧ©Χ•Χ Χ©Χ Χ”Χ•Χ§ΧΧ•Χ¨ Χ•ΧΧ Χ”Χ©Χ Χ™Χ™Χ Χ”ΧΧ—Χ¨Χ•Χ Χ™Χ Χ•Χ©ΧΧ” ΧΧ•ΧΧ Χ‘ΧΧ§Χ•Χ Χ”ΧΧ—Χ¨Χ•Χ Χ©Χ Χ”Χ•Χ§ΧΧ•Χ¨.
4) ΧΧ”Χ©ΧΧΧ© Χ‘ vextractf128 Χ›Χ“Χ™ Χ©ΧΧ™ ΧΆΧ¨Χ›Χ™Χ ΧΆΧΧ™Χ•Χ Χ™Χ ΧΧ•Χ§ΧΧ•Χ¨ ymm ΧΧ¨Χ’Χ™Χ΅ΧΧ¨ xmm . 
### vshufps
Χ”Χ¨Χ‘Χ” Χ¤ΧΆΧΧ™Χ Χ Χ¨Χ¦Χ” ΧΧ‘Χ¦ΧΆ Χ¤ΧΆΧ•ΧΧ” ΧΧΧΧΧ™Χ Χ©Χ Χ•Χ§ΧΧ•Χ¨ ΧΆΧ Χ¤Χ¨ΧΧ•ΧΧ¦Χ™Χ” ΧΆΧ ΧΆΧ¦ΧΧ•. ΧΧ©Χ Χ›Χ ΧΧ©ΧΧΧ©Χ™Χ Χ‘Χ¤Χ§Χ•Χ“Χ” vshufps Χ©ΧΧ§Χ‘ΧΧ Χ•Χ§ΧΧ•Χ¨ Χ©Χ ΧΧ¨Χ‘ΧΆΧ” floats Χ›Χ§ΧΧ, Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ™ΧΆΧ“, Χ•ΧΧ΅Χ¤Χ¨ Χ‘Χ§Χ¨Χ” (ΧΧ΅Χ¤Χ¨ Χ©Χ§Χ•Χ‘ΧΆ ΧΧ Χ”Χ”ΧΧ Χ”Χ’Χ•Χ Χ©Χ Χ”Χ¤Χ§Χ•Χ“Χ” Χ‘Χ¨ΧΧ” ΧΧ΅Χ•Χ™Χ™ΧΧ, Χ‘ΧΧ§Χ¨Χ” Χ”Χ–Χ” ΧΧ Χ΅Χ“Χ¨ Χ”ΧΧ™Χ‘Χ¨Χ™Χ).

ΧΧ“Χ•Χ’ΧΧ”, Χ”Χ¤Χ§Χ•Χ“Χ” 

$$\text{ vshufps xmm1, xmm0, xmm0, 0b}\textcolor{red}{01}\textcolor{yellow}{00}\textcolor{green}{11}\textcolor{cyan}{10}$$

ΧΧ™Χ§Χ— ΧΧ Χ”Χ•Χ§ΧΧ•Χ¨ xmm0 Χ•ΧΧΧ§Χ ΧΧ Χ”ΧΧ™Χ‘Χ¨Χ™Χ Χ‘xmm1 ΧΧ¤Χ™ Χ”ΧΧ΅Χ¤Χ¨ Χ”Χ‘Χ™Χ ΧΧ¨Χ™ 01001110, Χ›Χ Χ©Χ Χ™ Χ‘Χ™ΧΧ™Χ ΧΧ™Χ™Χ¦Χ’Χ™Χ ΧΧ Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ‘Χ•Χ§ΧΧ•Χ¨ xmm1 ΧΧ‘Χ—Χ™Χ Χ Χ”ΧΧ™Χ§Χ•Χ Χ©ΧΧ”Χ (Χ©Χ Χ™ Χ”Χ‘Χ™ΧΧ™Χ Χ”Χ¨ΧΧ©Χ•Χ ΧΧ™Χ™Χ¦Χ’Χ™Χ ΧΧ Χ”ΧΧ™Χ§Χ•Χ Χ” 0 Χ‘xmm1) Χ•Χ’Χ ΧΧ‘Χ—Χ™Χ Χ Χ”ΧΆΧ¨Χ Χ©ΧΧ”Χ (ΧΧΧ©Χ 01 ΧΧ™Χ™Χ¦Χ’ ΧΧ Χ”ΧΧ™Χ Χ“Χ§Χ΅ 1 Χ‘xmm0). Χ›Χ Χ‘ΧΆΧ¦Χ ΧΧΧ‘Χ¦ΧΆ Χ”shuffle , Χ‘ΧΧ™Χ Χ“Χ§Χ΅ i Χ‘xmm1 Χ ΧΧ§Χ ΧΧ Χ”ΧΧ΅Χ¤Χ¨ ΧΧ¤Χ™ Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ©Χ Χ§Χ‘ΧΆ ΧΧ¤Χ™ ΧΧ΅Χ¤Χ¨ Χ”Χ‘Χ§Χ¨Χ”.

![Pasted image 20240330185633.png|300](/img/user/Assets/Pasted%20image%2020240330185633.png)

Χ Χ©Χ™Χ ΧΧ‘ Χ©Χ©ΧΧ Χ• ΧΧ xmm0 Χ›ΧΧ§Χ•Χ¨ Χ Χ•Χ΅Χ£, Χ‘Χ§Χ•Χ Χ‘Χ Χ¦Χ™Χ™Χ” Χ©ΧΧ™Χ Χ‘Χ©Χ Χ™Χ”Χ ΧΧ ΧΧ•ΧΧ• Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨. 

Χ Χ¨ΧΧ” Χ“Χ•Χ’ΧΧ” Χ©ΧΧ©ΧΧΧ©Χ Χ‘Χ¤Χ§Χ•Χ“Χ” Χ”Χ–ΧΧ, Χ Χ‘Χ Χ” ΧΧ•Χ›Χ Χ™Χ Χ©Χ Χ§Χ¨ΧΧ xysum, ΧΧ§Χ‘ΧΧ Χ©Χ Χ™ Χ•Χ§ΧΧ•Χ¨Χ™Χ x,y Χ©Χ floats Χ‘ΧΧ•Χ¨Χ n Χ•ΧΧ—Χ©Χ‘Χ ΧΧ 

$$sum(xy) - sqrt(sum(x^2) + sum(y^2))$$

```assembly
.intel_syntax noprefix

.section .text
.globl calc
# float calc (float x[], float[] y, long n) 
# calculating sum(xy) - sqrt(sum(x^2) + sum(y^2))


calc:
    # x - rdi
    # y - rsi
    # n - rdx, assuming n divides 4 for simplicity

    # calculating xy in xmm2
    # calculating x^2 in xmm3
    # calculating y^2 in xmm4
    vxorps xmm2, xmm2, xmm2
    vxorps xmm3, xmm3, xmm3
    vxorps xmm4, xmm4, xmm4

    # the loop
    xor r8, r8 # defining byte counter in r8
    xor r9, r9 # defining loop counter in r9
.for_loop:
    cmp r9, rdx # r9 - rdx
    jge .end_for_loop # if r9 - rdx >= 0 then jump

# inside the loop
    vmovaps xmm0, [rdi + r8] # loading x value
    vmovaps xmm1, [rsi + r8] # loading y value

    # calculating xy
    vmulps xmm5, xmm0, xmm1
    # adding xy to sum(xy)
    vaddps xmm2, xmm5, xmm2

    # calculating x^2, and adding it to sum(x^2)
    vmulps xmm0, xmm0, xmm0
    vaddps xmm3, xmm0, xmm3
    
    # calculating y^2, and adding it to sum(y^2)
    vmulps xmm1, xmm1, xmm1
    vaddps xmm4, xmm1, xmm4

    add r8, 16 # increasing byte counter
    add r9, 4 # increasing loop counter

    jmp .for_loop # jumping to the start of the loop

.end_for_loop:
    vaddps xmm3, xmm4, xmm3 # calculating sum(x^2) + sum(y^2)

    # summing the 4 seperate values in xmm2, to one value
    vshufps xmm6, xmm2, xmm2, 0b01001110
    vaddps xmm2, xmm6, xmm2
    vshufps xmm6, xmm2, xmm2, 0b10110001
    vaddps xmm2, xmm6, xmm2

    # summing the 4 seperate values in xmm3, to one value
    vshufps xmm6, xmm3, xmm3, 0b01001110
    vaddps xmm3, xmm6, xmm3
    vshufps xmm6, xmm3, xmm3, 0b10110001
    vaddps xmm3, xmm6, xmm3

    vsqrtss xmm3, xmm3, xmm3 #calculating sqrt(sum(x^2) + sum(y^2))


    vsubss xmm0, xmm2, xmm3 # calculating the final value
    ret
```

1) Χ Χ™ΧΧ ΧΧ¨ΧΧ•Χ Χ©ΧΧ›Χ Χ™Χ΅Χ™Χ ΧΧΧ•Χ Χ”Χ•Χ§ΧΧ•Χ¨Χ™Χ Χ‘Χ§Χ¤Χ™Χ¦Χ•Χ Χ©Χ 16 Χ‘Χ™ΧΧ™Χ Χ›ΧΧ•ΧΧ¨ 4 floats Χ›Χ Χ¤ΧΆΧ.
2) Χ‘Χ’ΧΧ Χ©Χ›Χ xmm Χ©Χ¦Χ•Χ‘Χ¨ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” ΧΧ›Χ™Χ Χ‘Χ›Χ ΧΧ™Χ‘Χ¨ Χ‘Χ•Χ§ΧΧ•Χ¨ ΧΧΧ™ Χ΅Χ›Χ•ΧΧ™Χ Χ‘Χ§Χ¤Χ™Χ¦Χ•Χ Χ©Χ 4. Χ Χ¨Χ¦Χ” ΧΧ”Χ©ΧΧΧ© Χ‘shuf Χ›Χ“Χ™ ΧΧ΅Χ›Χ•Χ ΧΧ Χ”Χ•Χ§ΧΧ•Χ¨ ΧΆΧ ΧΧΧ•Χ¨Χ” ΧΆΧ ΧΆΧ¦ΧΧ•.
3) Χ‘Χ΅Χ•Χ£ Χ¨Χ™Χ¦Χ 2 Χ”shuffle Χ©Χ¨Χ©Χ•ΧΧ™Χ Χ‘Χ§Χ•Χ“ Χ‘xmm Χ”Χ¦Χ•Χ‘Χ¨ Χ™Χ”Χ™Χ” Χ‘Χ›Χ ΧΧ™Χ‘Χ¨ Χ‘Χ•Χ§ΧΧ•Χ¨ float Χ©Χ”Χ•Χ Χ”Χ΅Χ›Χ™ΧΧ” Χ©Χ Χ›Χ Χ”ΧΧ™Χ‘Χ¨Χ™Χ. 
### AVX Text String Processing
Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ Χ•Χ§ΧΧ•Χ¨Χ™Χ™Χ ΧΆΧ•Χ©Χ™Χ ΧΆΧ‘Χ•Χ“Χ” ΧΧΧ•Χ“ ΧΧ•Χ‘Χ” Χ›ΧΧ©Χ¨ Χ¨Χ•Χ¦Χ™Χ ΧΧΆΧ©Χ•Χ ΧΧ Χ™Χ¤Χ•ΧΧ¦Χ™Χ” ΧΆΧ ΧΧ—Χ¨Χ•Χ–Χ•Χ.

Χ Χ Χ™Χ— Χ•Χ”Χ™Χ™Χ Χ• Χ¨Χ•Χ¦Χ™Χ Χ©Χ‘Χ”Χ™Χ ΧΧ ΧΧ—Χ¨Χ•Χ–Χ Χ›ΧΧ©Χ”Χ™, ΧΧ§Χ‘Χ mask Χ©Χ§Χ•Χ‘ΧΆ ΧΧ Χ”ΧΧ™Χ§Χ•ΧΧ™Χ Χ©Χ‘Χ”Χ Χ™Χ© uppercase char Χ‘ΧΧ—Χ¨Χ•Χ–Χ.
ΧΧΧ©Χ ΧΆΧ‘Χ•Χ¨ Χ”ΧΧ—Χ¨Χ•Χ–Χ Ab1cDE23f4gHi5J6 Χ”mask Χ™Χ”Χ™Χ” 1000110000010010.

Χ›Χ“Χ™ ΧΧ”Χ©Χ™Χ’ ΧΧ•Χ¦ΧΧ” Χ›Χ–ΧΧ Χ Χ©ΧΧΧ© Χ‘Χ¤Χ§Χ•Χ“Χ•Χ AVX Χ”Χ‘ΧΧ•Χ
![Pasted image 20240330154106.png|250](/img/user/Assets/Pasted%20image%2020240330154106.png)

1) pcmp = packed compare 
2) e - ΧΆΧ‘Χ•Χ¨ ΧΧ—Χ¨Χ•Χ–Χ•Χ ΧΆΧ explicit length (ΧΧΆΧ‘Χ™Χ¨Χ™Χ Χ’Χ ΧΧ Χ”ΧΧ•Χ¨Χ Χ›Χ§ΧΧ). Χ‘ΧΧ™Χ“Χ” Χ•ΧΆΧ•Χ‘Χ“Χ™Χ ΧΆΧ ΧΧ—Χ¨Χ•Χ–Χ•Χ ΧΆΧ ΧΧ•Χ¨Χ ΧΧ¤Χ•Χ¨Χ© Χ”Χ§ΧΧ ΧΆΧ‘Χ•Χ¨ Χ›Χ ΧΧ—Χ“ ΧΧ”Χ΅ΧΧ¨Χ™Χ Χ’Χ™Χ Χ¦Χ¨Χ™Χ ΧΧ”Χ™Χ•Χ Χ‘RAX Χ•Χ‘ RDX Χ‘Χ”ΧΧΧΧ”.
3) i - ΧΆΧ‘Χ•Χ¨ ΧΧ—Χ¨Χ•Χ–Χ•Χ ΧΆΧ implicit length (ΧΧ Χ™Χ—Χ™Χ Χ©Χ‘ΧΧ—Χ¨Χ•Χ–Χ Χ™Χ© `0\` _ΧΧ•_ Χ©Χ”Χ™Χ ΧΧ•Χ¤Χ΅Χ ΧΧ Χ›Χ Χ”register).
4) stri - ΧΆΧ¨Χ Χ”Χ—Χ–Χ¨Χ” Χ”Χ•Χ Χ‘Χ¦Χ•Χ¨Χ index Χ‘Χ¨Χ’Χ™Χ΅ΧΧ¨ RCX.
5) strm - ΧΆΧ¨Χ Χ”Χ—Χ–Χ¨Χ” Χ”Χ•Χ Χ‘Χ¦Χ•Χ¨Χ mask Χ‘Χ¨Χ’Χ™Χ΅ΧΧ¨ XMM0.

Χ Χ Χ΅Χ” ΧΧ¤ΧΧ•Χ¨ ΧΧ Χ”Χ‘ΧΆΧ™Χ” Χ”ΧΧΧ•ΧΧ¨Χ ΧΧΧΆΧΧ” ΧΆΧ Χ”Χ›ΧΧ™Χ Χ”ΧΧΧ•:
1) Χ”Χ¤Χ§Χ•Χ“Χ” Χ›ΧΧ•Χ‘Χ ΧΧ”Χ™Χ” pcmpistrm Χ›Χ™ Χ”Χ§ΧΧ Χ”Χ•Χ Χ¨Χ§ ΧΧ—Χ¨Χ•Χ–Χ Χ•Χ Χ¨Χ¦Χ” ΧΧ Χ”Χ¤ΧΧ Χ‘Χ¦Χ•Χ¨Χ mask.
2) Χ”Χ¤Χ§Χ•Χ“Χ” ΧΧ§Χ‘Χ Χ©Χ Χ™ Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ, XMM1 Χ• XMM2 Χ• ΧΧ΅Χ¤Χ¨ Χ‘Χ§Χ¨Χ”.
	1) XMM1 - ΧΧ›Χ™Χ Χ–Χ•Χ’Χ•Χ Χ©Χ ΧΧ•Χ•Χ—Χ™Χ (Χ›Χ Χ©Χ Χ™ Χ‘ΧΧ™Χ ΧΧ™Χ™Χ¦Χ’ ΧΧ•Χ•Χ—) 
	2) XMM2 - ΧΧ›Χ™Χ ΧΧ Χ”ΧΧ—Χ¨Χ•Χ–Χ ΧΆΧ¦ΧΧ”. 
	3) Χ” control number Χ§Χ•Χ‘ΧΆ ΧΧ™Χ–Χ” Χ¤ΧΆΧ•ΧΧ•Χ Χ Χ¨Χ¦Χ” ΧΧΆΧ©Χ•Χ ΧΆΧ Χ”ΧΧ—Χ¨Χ•Χ–Χ.
3) Χ”ΧΧ•Χ¦ΧΧ” ΧΧ”Χ™Χ” Χ‘ xmm0 Χ‘Χ¦Χ•Χ¨Χ Χ©ΧΧ™ Χ‘ΧΧ™Χ Χ©ΧΧ ΧΧ΅ΧΧ›ΧΧ™Χ ΧΆΧΧ™Χ”Χ Χ›ΧΧ΅Χ¤Χ¨ ΧΧ—Χ“ ΧΧ– Χ”Χ™Χ™Χ¦Χ•Χ’ Χ”Χ‘Χ™Χ ΧΧ¨Χ™ Χ©ΧΧ”Χ Χ™Χ”Χ™Χ” Χ”ΧΧΧ΅Χ§ Χ©Χ§Χ•Χ‘ΧΆ Χ”ΧΧ ΧΧ΅Χ¤Χ¨ Χ ΧΧ¦Χ Χ‘ΧΧ—Χ“ Χ”range Χ©Χ”Χ’Χ“Χ¨Χ Χ• ΧΧ¨ΧΧ©. Χ”ΧΧ•Χ¦ΧΧ” Χ Χ¨ΧΧ Χ›Χ›Χ” Χ‘ xmm0 Χ‘Χ’ΧΧ Χ”ΧΧ΅Χ¤Χ¨ Χ‘Χ§Χ¨Χ”. ΧΧ΅Χ¤Χ¨ Χ‘Χ§Χ¨Χ” ΧΧ—Χ¨ Χ™Χ Χ™Χ‘ Χ¤ΧΆΧ•ΧΧ•Χ ΧΧ—Χ¨Χ•Χ Χ•Χ©ΧΧ™Χ¨ΧΧ Χ‘mask Χ‘Χ¦Χ•Χ¨Χ” ΧΧ—Χ¨Χ. Χ”Χ΅Χ™Χ‘Χ” Χ©Χ–Χ” Χ‘ΧΧ¦Χ•Χ¨Χ 2 Χ‘ΧΧ™Χ Χ”Χ™Χ Χ© 2 Χ‘ΧΧ™Χ Χ–Χ” 16 Χ‘Χ™ΧΧ™Χ Χ©Χ›Χ Χ‘Χ™Χ i Χ©Χ§Χ•Χ ΧΧΧ• (Χ‘Χ™Χ) Χ”i Χ‘ΧΧ—Χ¨Χ•Χ–Χ. 16 Χ‘ΧΧ™Χ Χ–Χ” Χ”ΧΧ΅Χ¤Χ¨ Χ”ΧΧ§Χ΅Χ™ΧΧΧ™ Χ©Χ ΧΧ•Χ•Χ™Χ Χ©Χ•Χ§ΧΧ•Χ¨ Χ™Χ›Χ•Χ ΧΧ§Χ‘Χ Χ‘Χ‘Χ ΧΧ—Χ.

Χ Χ΅ΧΧ›Χ ΧΧ” Χ§Χ•Χ¨Χ” ΧΆΧ‘Χ•Χ¨ Χ”Χ¤Χ§Χ•Χ“Χ” Χ”Χ‘ΧΧ” 
```assembly
pcmpistrm xmm1, xmm2, 00000100b
```
Χ›ΧΧ©Χ¨ Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨Χ™Χ ΧΧ›Χ™ΧΧ™Χ ΧΧ Χ”ΧΧ•Χ›Χ Χ”Χ‘Χ
![Pasted image 20240330160624.png](/img/user/Assets/Pasted%20image%2020240330160624.png)
* XMM1 ΧΧ›Χ™Χ ΧΧ Χ”range Χ©Χ”Χ•Χ Χ”ΧΧ•Χ•Χ— 'A'-'Z' .
* XMM2 ΧΧ›Χ™Χ ΧΧ Χ”ΧΧ—Χ¨Χ•Χ–Χ Χ‘Χ΅Χ“Χ¨ Χ”Χ¤Χ•Χ.

Χ”Χ¤ΧΆΧΧ Χ”Χ¤Χ§Χ•Χ“Χ” ΧΧΧ ΧΧ Χ”Χ¤ΧΧ Χ”Χ‘Χ
![Screenshot 2024-03-30 at 16.07.39.png](/img/user/Assets/Screenshot%202024-03-30%20at%2016.07.39.png)

ΧΧ Χ Χ΅ΧΧ›Χ ΧΆΧ Χ”ΧΧ΅Χ¤Χ¨Χ™Χ 48 Χ• 31 Χ‘Χ™Χ™Χ¦Χ•Χ’ Χ‘Χ™Χ ΧΧ¨Χ™ Χ Χ§Χ‘Χ 

$$\text{0x4831=0100100000110001b}$$
Χ Χ©Χ™Χ ΧΧ‘ Χ©Χ”Χ‘Χ™Χ Χ”Χ¨ΧΧ©Χ•Χ Χ“Χ•ΧΧ§ ΧΆΧ‘Χ•Χ¨ Χ”ΧΧ• Χ”ΧΧ—Χ¨Χ•Χ Χ‘ΧΧ—Χ¨Χ•Χ–Χ:

![Screenshot 2024-03-30 at 16.08.58.png|200](/img/user/Assets/Screenshot%202024-03-30%20at%2016.08.58.png)

==Χ”Χ™ΧΧ¨Χ•Χ Χ”Χ’Χ“Χ•Χ Χ›ΧΧ Χ”Χ•Χ Χ©Χ›Χ Χ”Χ¤ΧΆΧ•ΧΧ” Χ”Χ–ΧΧ Χ§Χ•Χ¨ΧΧ Χ‘Χ¦Χ•Χ¨Χ” ΧΧ§Χ‘Χ™ΧΧ™Χ Χ‘Χ’ΧΧ Χ”Χ©Χ™ΧΧ•Χ© Χ‘AVX.==

Χ›ΧΆΧ Χ Χ›ΧΧ•Χ‘ Χ§Χ•Χ“ ΧΧ΅ΧΧ‘ΧΧ™ Χ©ΧΧ•Χ§Χ— ΧΧ—Χ¨Χ•Χ–Χ Χ•ΧΧΧ™Χ¨ ΧΧ Χ›Χ Χ”ΧΧ•ΧΧ™Χ•Χ Χ©ΧΧ” ΧΧΧ•ΧΧ™Χ•Χ Χ§ΧΧ Χ•Χ

```assembly

section .data
str: db β€Ab1cDE23f4gHi5J6β€™
AZ_mask: db β€A', β€Zβ€™	
                   times 14 db 0
imm: equ 01000100b
AZ2az_mask: times 16 db ('a' - 'Aβ€™)
result: times 16 db 0
            db `\n\0`	

extern printf
section .text
global main
main:
    enter
    movdqu xmm1, [AZ_mask]
    movdqu xmm2, [str]
    pcmpistrm xmm1, xmm2, imm
    movdqu xmm3, [AZ2az_mask]
    pand xmm0, xmm3
    paddb xmm2, xmm0
    movdqu [result], xmm2
    mov rdi, result
    mov rax, 0
    call printf
    leave
    ret

```
1) Χ‘ data section ΧΧ’Χ“Χ™Χ¨Χ™Χ ΧΧ Χ”ΧΧ—Χ¨Χ•Χ–Χ, ΧΧ Χ©Χ Χ™ Χ”masks Χ•ΧΧ Χ”control number.
	1) times Χ–Χ” Χ§Χ™Χ¦Χ•Χ¨ ΧΧΧ¨Χ©Χ•Χ x Χ¤ΧΆΧΧ™Χ ΧΧ™Χ–Χ” ΧΧ• ΧΧ• ΧΧ—Χ¨Χ•Χ–Χ. times 16 db 0 ΧΧΧ©Χ, Χ©Χ§Χ•Χ ΧΧΧ¨Χ©Χ•Χ 16 Χ¤ΧΆΧΧ™Χ 0.
	2) db=define bytes.
	3) imm: equ=immediate equal to Χ–Χ” Χ”Χ’Χ“Χ¨Χ Χ§Χ‘Χ•ΧΆ Χ‘Χ–ΧΧ Χ§Χ•ΧΧ¤Χ™ΧΧ¦Χ™Χ”.

2) Χ©Χ•ΧΧ¨Χ™Χ Χ‘ xmm1 ΧΧ AZ_mask Χ•ΧΧ Χ”ΧΧ—Χ¨Χ•Χ–Χ Χ‘ xmm2.
3) ΧΧ¨Χ™Χ¦Χ™Χ ΧΧ Χ”Χ¤Χ§Χ•Χ“Χ” pcmpistrm xmm1, xmm2, imm.
	1) Χ”ΧΧ•Χ¦ΧΧ” Χ Χ©ΧΧ¨Χ Χ‘ xmm0. 
	2) Χ Χ©Χ™Χ ΧΧ‘ Χ©Χ” imm Χ©Χ•Χ Χ” ΧΧΧ” Χ©Χ”Χ™Χ” Χ‘Χ“Χ•Χ’ΧΧ” Χ›ΧΆΧ Χ”Χ“Χ’ΧΧ Χ• ΧΧ Χ”Χ‘Χ™Χ Χ”Χ©Χ™Χ©Χ™ ΧΧ” Χ©ΧΧ¨Χ—Χ™Χ‘ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ bytes Χ‘ΧΧ§Χ•Χ ΧΧ‘Χ™ΧΧ™Χ Χ›ΧΧ• Χ‘Χ’Χ¨Χ΅Χ” Χ”Χ§Χ•Χ“ΧΧ. Χ›ΧΧ•ΧΧ¨ ΧΧ Χ”ΧΧ• Χ”i Χ ΧΧ¦Χ Χ‘ΧΧ•Χ•Χ— ΧΧ– Χ”Χ‘Χ™Χ Χ”i Χ‘ mask Χ™Χ”Χ™Χ” 'FF'.
4) ΧΧΧ—Χ¨ ΧΧ›Χ ΧΧ•ΧΆΧ Χ™Χ ΧΧ AZ2az_mask Χ xmm3.
	1) Χ Χ©Χ™Χ ΧΧ‘ Χ©Χ”mask Χ”Χ–Χ” Χ”Χ•Χ 16 Χ‘ΧΧ™Χ Χ©Χ‘Χ›Χ Χ‘Χ™Χ Χ™Χ© ('a'-'A') Χ©Χ–Χ” Χ”Χ”Χ¤Χ¨Χ© Χ‘Χ™Χ Χ”ΧΆΧ¨Χ›Χ™Χ Χ”[[Computer Science/Computer System/ASCII\|ASCII]] Χ©ΧΧ”Χ Χ›ΧΧ•ΧΧ¨ 20h. 
5) Χ›ΧΆΧ ΧΆΧ•Χ©Χ™Χ and Χ‘Χ™Χ xmm0 Χ©ΧΧ›Χ™Χ ΧΧ Χ”mask Χ”Χ¨ΧΧ©Χ•Χ ΧΧ‘Χ™Χ xmm3 Χ©ΧΧ›Χ™Χ 20 Χ‘Χ›Χ Χ‘Χ™Χ.
	1) 20h Χ‘Χ‘Χ™Χ ΧΧ¨Χ™Χ Χ–Χ” 00100000b. ΧΧ Χ ΧΆΧ©Χ” and ΧΆΧ FF Χ Χ§Χ‘Χ Χ©Χ•Χ‘ 20h.
	2) Χ”Χ¤ΧΆΧ•ΧΧ” ΧΧ©ΧΧ™Χ¨Χ” Χ‘Χ‘ΧΧ™Χ Χ©Χ΄Χ“ΧΧ•Χ§Χ™ΧΧ΄ Χ›ΧΧ•ΧΧ¨ Χ”Χ‘ΧΧ™Χ Χ©Χ‘Χ”Χ Χ™Χ© ΧΧ•Χ•Χ™Χ Χ‘ΧΧ•ΧΧ™Χ•Χ Χ’Χ“Χ•ΧΧ•Χ ΧΧ Χ”ΧΆΧ¨Χ 20h Χ•Χ‘Χ©ΧΧ¨ Χ™Χ© 0.
6) paddb - ΧΆΧ•Χ©Χ” Χ—Χ™Χ‘Χ•Χ¨ Χ•Χ§ΧΧ•Χ¨Χ™ Χ packed bytes , Χ›ΧΧ©Χ¨ ΧΆΧ•Χ©Χ™Χ ΧΧ Χ–Χ” Χ‘Χ™Χ xmm0 Χ xmm2 Χ”ΧΧ•Χ¦ΧΧ” ΧΧ”Χ™Χ” Χ”ΧΆΧ¨Χ Χ”ascii Χ©Χ Χ”ΧΧ• Χ‘ΧΧ•Χ΅Χ¤Χ 20 ΧΧ Χ”Χ•Χ ΧΧ• ΧΧ΅Χ•Χ’ upper case ΧΧ• Χ›ΧΧ•Χ ΧΆΧ‘Χ•Χ¨ Χ›Χ ΧΧ• ΧΧ—Χ¨.
	1) ΧΧ•Χ΅Χ¤Χ Χ©Χ 20 ΧΧΧ• upper ΧΧΧ™Χ¨Χ” ΧΧ•ΧΧ• Χ lower (Χ”Χ”Χ¤Χ¨Χ© Χ‘Χ™Χ Χ”Χ Χ”Χ•Χ 20, Χ–Χ” ΧΧΧ” Χ©ΧΧ Χ• 20 ΧΧΧ›ΧΧ—Χ™ΧΧ”).
7) ΧΧ–Χ™Χ–Χ™Χ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” ΧΧ›ΧΧ•Χ‘Χ Χ©Χ‘Χ” Χ ΧΧ¦Χ result Χ•ΧΧΆΧ‘Χ™Χ¨Χ™Χ ΧΧ•ΧΧ• Χ›Χ§ΧΧ Χ printf.

![Pasted image 20240330170522.png|450](/img/user/Assets/Pasted%20image%2020240330170522.png)

__Χ“Χ’Χ©Χ™Χ:__
1) Χ›Χ¤Χ™ Χ©Χ¨ΧΧ™Χ Χ• Χ›Χ Χ‘Χ™Χ Χ‘ΧΧ΅Χ¤Χ¨ Χ‘Χ§Χ¨Χ” ΧΧ©Χ¤Χ™ΧΆ ΧΆΧ ΧΧ™Χ Χ©Χ Χ¨ΧΧ” Χ”Χ¤ΧΧ.
2) Χ Χ™ΧΧ ΧΧΧ multirange Χ‘Χ¨Χ’Χ™Χ΅ΧΧ¨ Χ”ΧΧ•Χ•Χ—Χ™Χ Χ•ΧΧ•Χ•Χ™Χ Χ©Χ ΧΧ¦ΧΧ™Χ Χ‘ΧΧ¤Χ—Χ•Χ ΧΧ—Χ“ ΧΧ‘Χ™Χ Χ”ΧΧ•Χ•Χ—Χ™Χ Χ”ΧΧΧ• Χ™Χ΅Χ•ΧΧ Χ•.
	![Pasted image 20240330170710.png|450](/img/user/Assets/Pasted%20image%2020240330170710.png)
3) Χ‘Χ›Χ Χ΅Χ™Χ•Χ Χ¨Χ™Χ¦Χ” Χ©Χ Χ”Χ¤Χ§Χ•Χ“Χ” Χ” CF Χ™Χ”Χ™Χ” Χ“ΧΧ•Χ§.
4) ΧΧ Χ™Χ”Χ™Χ” `0\` Χ‘ΧΧΧ¦ΧΆ Χ”Χ¨Χ™Χ¦Χ” Χ›ΧΧ•ΧΧ¨ Χ”ΧΧ—Χ¨Χ•Χ–Χ Χ§ΧΧ Χ” Χ16 Χ‘ΧΧ™Χ, ΧΧ•ΧΧ•ΧΧΧ™Χ Χ”Χ¤Χ§Χ•Χ“Χ” ΧΧ¤Χ΅Χ™Χ§ ΧΧ Χ¤ΧΆΧ•ΧΧ” Χ”Χ”Χ©Χ•Χ•ΧΧ” Χ•Χ™Χ΅Χ•ΧΧ 0 Χ‘Χ›Χ Χ‘Χ™Χ/Χ‘Χ™Χ i Χ©Χ’Χ“Χ•ΧΧ™Χ ΧΧΧ•Χ¨Χ Χ”ΧΧ—Χ¨Χ•Χ–Χ. Χ›ΧΧ• Χ›Χ Χ” ZF Χ™Χ”Χ™Χ” Χ“ΧΧ•Χ§.

![Pasted image 20240330170851.png|450](/img/user/Assets/Pasted%20image%2020240330170851.png)
#### control number
Χ”Χ΅Χ™Χ‘Χ” Χ©ΧΆΧ‘Χ“Χ Χ• ΧΆΧ ΧΧ•Χ•Χ—Χ™Χ ΧΆΧ“ ΧΆΧ›Χ©Χ™Χ• Χ”Χ™Χ Χ‘Χ’ΧΧ Χ” control number Χ•Χ”Χ‘Χ™ΧΧ™Χ Χ©Χ‘Χ—Χ¨Χ Χ• Χ©Χ™Χ”Χ™Χ• Χ“ΧΧ•Χ§Χ™Χ Χ‘Χ•. Χ›ΧΧ©Χ¨ ΧΆΧ•Χ‘Χ“Χ™Χ ΧΆΧ Χ”control number Χ‘ΧΧ§Χ¨Χ” Χ©Χ pcmps ΧΧ΅ΧΧ›ΧΧ™Χ ΧΆΧ Χ¦ΧΧ“Χ™Χ Χ©Χ Χ‘Χ™ΧΧ™Χ- Χ”Χ¦ΧΧ“ $(1:0)$ ΧΧ΅ΧΧ ΧΧ Χ”Χ‘Χ™Χ Χ” 0 Χ•Χ”Χ‘Χ™Χ Χ” 1 Χ•Χ›Χ Χ”ΧΧΧ”. Χ‘ΧΧ§Χ¨Χ” Χ©Χ Χ”Χ“Χ•Χ’ΧΧΧ•Χ Χ”Χ Χ΄Χ ΧΧ Χ—Χ Χ• Χ”Χ“ΧΧ§Χ Χ• ΧΧ Χ”Χ‘Χ™Χ Χ”2 Χ•ΧΧ ΧΧ Χ”Χ‘Χ™Χ 3 ΧΧ” Χ©Χ§Χ‘ΧΆ Χ©Χ”Χ”Χ©Χ•Χ•ΧΧ” Χ©Χ Χ©ΧΧΧ© Χ‘Χ” ΧΧ”Χ™Χ” ΧΧ΅Χ•Χ’ equal range.

Χ‘Χ™ΧΧ™Χ Χ Χ•Χ΅Χ¤Χ™Χ Χ™Χ•Χ‘Χ™ΧΧ• ΧΧ”Χ©Χ•Χ•ΧΧ•Χ ΧΧ¦Χ•Χ¨Χ” ΧΧ—Χ¨Χ ΧΧΧ©Χ:
1) ΧΧ Χ©Χ Χ™ Χ”Χ‘Χ™ΧΧ™Χ Χ™Χ”Χ™Χ• Χ›Χ‘Χ•Χ™Χ™Χ Χ›ΧΧ•ΧΧ¨ 00. Χ”Χ”Χ©Χ•Χ•ΧΧ” ΧΧ”Χ™Χ” ΧΧ΅Χ•Χ’ equal any Χ›ΧΧ•ΧΧ¨ Χ‘Χ•Χ“Χ§Χ Χ”ΧΧ Χ”ΧΧ• Χ‘ XMM2 Χ ΧΧ¦Χ ΧΧ™Χ¤Χ” Χ©Χ”Χ•Χ Χ‘ XMM1. 
![Pasted image 20240330172223.png|450](/img/user/Assets/Pasted%20image%2020240330172223.png)

2) ΧΧ Χ”Χ‘Χ™Χ Χ”3 Χ”Χ™Χ” Χ“Χ•ΧΧ§ ΧΧ‘Χ Χ”Χ‘Χ™Χ Χ”Χ©Χ Χ™ ΧΧ Χ›ΧΧ•ΧΧ¨ 10 Χ”Χ”Χ©Χ•Χ•ΧΧ” Χ”Χ™Χ Χ” ΧΧ“Χ•Χ™Χ§Χ- equal each Χ›ΧΧ•ΧΧ¨ Χ”ΧΧ Χ”Χ‘Χ™Χ Χ”i Χ‘ xmm2 Χ©Χ•Χ•Χ” ΧΧ‘Χ™Χ Χ”i Χ‘ xmm1
![Pasted image 20240330172352.png|450](/img/user/Assets/Pasted%20image%2020240330172352.png)

3) ΧΧ Χ©Χ Χ™ Χ”Χ‘Χ™ΧΧ™Χ Χ“Χ•ΧΧ§Χ™Χ ΧΧ– Χ”Χ©Χ•Χ•ΧΧ” Χ”Χ™Χ Χ” equal ordered Χ›ΧΧ•ΧΧ¨ Χ”ΧΧ xmm1 Χ”Χ•Χ substring Χ©Χ Χ”Χ©Χ Χ™ Χ•ΧΧ΅ΧΧ Χ™Χ Χ‘ mask ΧΧ Χ›Χ Χ”Χ‘ΧΧ™Χ Χ©Χ‘Χ”Χ ΧΧΧ—Χ™Χ Χ”substring
![Screenshot 2024-03-30 at 18.10.58.png|450](/img/user/Assets/Screenshot%202024-03-30%20at%2018.10.58.png)

__ΧΧ” Χ”ΧΧ©ΧΧΆΧ•Χ Χ©Χ Χ›Χ Χ¦ΧΧ“ Χ‘Χ™ΧΧ™Χ Χ‘control number__
1) Χ”Χ‘Χ™ΧΧ™Χ 0,1 Χ§Χ•Χ‘ΧΆΧ™Χ Χ›Χ™Χ¦Χ“ ΧΧ”ΧΧ™Χ™Χ—Χ΅ ΧΧΧ™Χ“ΧΆ Χ‘ΧΧ•Χ Χ”Χ•Χ§ΧΧ•Χ¨ (Χ”Χ¤Χ•Χ¨ΧΧ)
![Pasted image 20240330194552.png](/img/user/Assets/Pasted%20image%2020240330194552.png)

2) Χ”Χ‘Χ™ΧΧ™Χ 2 Χ• 3 ΧΆΧ•Χ©Χ™Χ ΧΧ ΧΧ” Χ©ΧΧ™ΧΧ¨Χ Χ• ΧΧΧΆΧΧ”
![Pasted image 20240330194639.png](/img/user/Assets/Pasted%20image%2020240330194639.png)
Χ‘Χ¤Χ΅Χ•Χ“Χ• Χ§Χ•Χ“ Χ›Χ ΧΧ—Χ“ ΧΧ”modes Χ”ΧΧΧ” ΧΆΧ•Χ©Χ” ΧΧ Χ”Χ‘Χ
![Pasted image 20240330194731.png|400](/img/user/Assets/Pasted%20image%2020240330194731.png)
Χ Χ™ΧΧ ΧΧ¨ΧΧ•Χ Χ©Χ ΧΆΧ©Χ Χ‘Χ“Χ™Χ§Χ” ΧΆΧ Χ”Χ‘Χ™Χ Χ” 0 Χ›Χ“Χ™ ΧΧ“ΧΆΧ Χ›Χ™Χ¦Χ“ ΧΧ”ΧΧ™Χ™Χ—Χ΅ Χdata ΧΧ‘Χ—Χ™Χ Χ Χ’Χ“ΧΧ™Χ.

3) Χ”Χ‘Χ™ΧΧ™Χ Χ” 4 Χ•Χ”5 Χ”Χ ΧΧ Χ™Χ¤Χ•ΧΧ¦Χ™Χ•Χ Χ©ΧΧ¤Χ©Χ¨ ΧΧΆΧ©Χ•Χ ΧΆΧ index Χ”ΧΧ•Χ¦ΧΧ” Χ‘ΧΧ™Χ“Χ” Χ•Χ”Χ¤Χ§Χ•Χ“Χ” Χ”Χ™Χ ΧΧ΅Χ•Χ’ index Χ•ΧΧ mask 
![Screenshot 2024-03-30 at 20.53.07.png](/img/user/Assets/Screenshot%202024-03-30%20at%2020.53.07.png)

4) Χ”Χ‘Χ™Χ Χ”6 Χ”Χ•Χ control byte Χ•Χ”Χ•Χ ΧΆΧ•Χ©Χ” Χ“Χ‘Χ¨Χ™Χ Χ©Χ•Χ Χ™Χ Χ‘Χ™Χ ΧΧ ΧΆΧ•Χ‘Χ“Χ™Χ ΧΆΧ mask Χ•Χ‘Χ™Χ ΧΧ ΧΧ™Χ Χ“Χ§Χ΅
	1) ΧΆΧ‘Χ•Χ¨ index - Χ”ΧΧ Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ©Χ—Χ•Χ–Χ¨ Χ™Χ”Χ™Χ” Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ©Χ Χ”ΧΧ• Χ”Χ¨ΧΧ©Χ•Χ Χ©ΧΧ§Χ™Χ™Χ ΧΧ Χ”Χ©Χ™Χ•Χ•Χ™Χ•Χ ΧΧ• Χ”ΧΧ—Χ¨Χ•Χ.
	![Pasted image 20240330205606.png](/img/user/Assets/Pasted%20image%2020240330205606.png)
	2) ΧΆΧ‘Χ•Χ¨ mask Χ”Χ¤ΧΆΧ•ΧΧ” ΧΧ—ΧΧ™ΧΧ” Χ”ΧΧ Χ”ΧΧ•Χ¦ΧΧ” ΧΧ”Χ™Χ” Χ‘ΧΧ¦Χ•Χ¨Χ ΧΧ΅Χ¤Χ¨ Χ©Χ©ΧΧ•Χ¨ Χ‘16 Χ”Χ‘Χ™ΧΧ™Χ Χ”Χ¨ΧΧ©Χ•Χ Χ™Χ Χ©Χ Χ”Χ¨Χ’Χ™Χ΅ΧΧ¨ ΧΧ• byte spread Χ›ΧΧ•ΧΧ¨ Χ›Χ Χ‘Χ™Χ Χ™Χ”Χ™Χ” ΧΧ• FF ΧΧ• 0 Χ‘ΧΧ™Χ“Χ” Χ•Χ”Χ•Χ ΧΧ§Χ™Χ™Χ ΧΧ Χ”Χ©Χ™Χ•Χ•Χ™Χ•Χ Χ©Χ Χ§Χ‘ΧΆ ΧΧ¨ΧΧ© ΧΧ• ΧΧ
![Pasted image 20240330205740.png](/img/user/Assets/Pasted%20image%2020240330205740.png)
#### Index result
Χ›Χ¤Χ™ Χ©ΧΧΧ¨Χ Χ• Χ”ΧΧ•Χ¦ΧΧ” Χ™Χ›Χ•ΧΧ” ΧΧ”Χ™Χ•Χ mask ΧΧ• ΧΧ™Χ Χ“Χ§Χ΅ ΧΧ΅Χ¤Χ¨Χ™ Χ‘ RCX. Χ Χ“Χ’Χ™Χ ΧΧ™Χ ΧΧ”Χ©ΧΧΧ© Χ‘Χ¤Χ§Χ•Χ“Χ” Χ©Χ©Χ•ΧΧ¨Χ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ‘ΧΧ™Χ Χ“Χ§Χ΅ ΧΧ΅Χ¤Χ¨Χ™. ΧΧΧ©Χ Χ—Χ™Χ©Χ•Χ‘ ΧΧ•Χ¨Χ ΧΧ—Χ¨Χ•Χ–Χ.

```assembly
section .data
str: db β€Ab1cDE23f4gHi5J6β€™
      db β€Ab1cDE23f4g\0β€™
EOS_mask: db 0x1,0xFF
	    times 14 db 0
imm: equ 00010100b

section .text
global s
s:
    enter
    xor rax, rax
    xor rcx, rcx
    movdqu xmm1, [EOS_mask]
    .loop
        add rax, rcx
        pcmpistri xmm1, [str+rax], imm
        jnz .loop

    add rax, rcx
    leave
    ret
```

1) Χ”ΧΧ—Χ¨Χ•Χ–Χ ΧΧ¨Χ•Χ›Χ” Χ™Χ•ΧΧ¨ Χ16 Χ‘ΧΧ™Χ ΧΧ›Χ Χ”Χ§Χ•Χ“ ΧΧ©ΧΧΧ© Χ‘ΧΧ•ΧΧΧ”.
2) Χ—Χ•Χ‘Χ” ΧΧ”Χ©ΧΧΧ© Χ‘ implicit length Χ©Χ›Χ ΧΧΧ¨Χ Χ”ΧΧ•Χ›Χ Χ™Χ Χ”Χ™Χ Χ—Χ™Χ©Χ•Χ‘ ΧΧ•Χ¨Χ.
3) Χ Χ©ΧΧΧ© Χ‘ equal range. 
4) Χ›Χ ΧΧ™ΧΧ¨Χ¦Χ™Χ” Χ©Χ Χ”ΧΧ•ΧΧΧ” Χ¦Χ•Χ‘Χ¨Χ™Χ ΧΧ Χ”ΧΆΧ¨Χ Χ©Χ RCX Χ‘ RAX ΧΆΧ“ Χ© ZF Χ™Χ”Χ™Χ” Χ“ΧΧ•Χ§.
5) Χ Χ©Χ™Χ ΧΧ‘ Χ©index Χ›Χ¤Χ™ Χ©ΧΧΧ¨Χ Χ• Χ”Χ•Χ ΧΧ Χ‘Χ™Χ“Χ™Χ•Χ§ Χ¦Χ•Χ‘Χ¨ ΧΧΧ Χ™Χ›Χ•Χ ΧΧ”Χ—Χ–Χ™Χ¨ ΧΧ Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ”Χ¨ΧΧ©Χ•Χ Χ©Χ“Χ•ΧΧ§ ΧΧ• Χ”ΧΧ—Χ¨Χ•Χ Χ©Χ“Χ•ΧΧ§, Χ›ΧΧ Χ›ΧΧ•Χ‘Χ Χ Χ—Χ–Χ™Χ¨ ΧΧ Χ”ΧΧ—Χ¨Χ•Χ Χ›Χ™ Χ‘ΧΧ§Χ¨Χ” Χ”Χ–Χ” Χ”Χ•Χ ΧΧ™Χ™Χ¦Χ’ Χ‘Χ™Χ“Χ™Χ•Χ§ ΧΧ ΧΧ΅Χ¤Χ¨ Χ”ΧΧ™Χ‘Χ¨Χ™Χ Χ©Χ§Χ™Χ™ΧΧ• ΧΧ Χ”ΧΧ ΧΧ™ Χ©Χ–Χ” Χ’Χ Χ”ΧΧ•Χ¨Χ Χ©Χ Χ”ΧΧ—Χ¨Χ•Χ–Χ.
## C Intrinsics 
Χ”ΧΧ§Χ‘Χ™ΧΧ” Χ©Χ Χ¤Χ§Χ•Χ“Χ•Χ SSE ΧΧ‘Χ Χ‘Χ©Χ¤Χ c. Χ‘ΧΧ“ΧΆΧ™ Χ”ΧΧ—Χ©Χ‘ Intrinsics Χ”Χ Χ‘Χ“Χ΄Χ› Χ¤Χ•Χ Χ§Χ¦Χ™Χ•Χ Χ©Χ”ΧΧ™ΧΧ•Χ© Χ©ΧΧ”Χ ΧΧΧ•Χ¤Χ ΧΆΧ Χ™Χ“Χ™ Χ”compiler. Χ‘Χ“Χ•ΧΧ” ΧΧ¤Χ•Χ Χ§Χ¦Χ™Χ•Χ [inline](https://en.wikipedia.org/wiki/Inline_function) Χ›ΧΧ©Χ¨ Χ”Χ§Χ•ΧΧ¤Χ™ΧΧ¨ Χ¨Χ•ΧΧ” Χ¤Χ•Χ Χ§Χ¦Χ™Χ” ΧΧ”Χ΅Χ•Χ’ Χ”Χ–Χ” Χ”Χ•Χ ΧΧ—ΧΧ™Χ£ Χ¤Χ©Χ•Χ ΧΧ Χ”Χ§Χ¨Χ™ΧΧ” Χ‘Χ§Χ•Χ“ Χ©Χ Χ”Χ¤Χ•Χ Χ§Χ¦Χ™Χ” Χ”Χ–ΧΧ Χ‘Χ–ΧΧ Χ§Χ•ΧΧ¤Χ™ΧΧ¦Χ™Χ”. Χ C Χ™Χ© Intrinsics Χ©ΧΧΧ¤Χ™Χ Χ§Χ¨Χ™ΧΧ•Χ Χ¤Χ•Χ Χ§Χ¦Χ™Χ” ΧΧ¤Χ§Χ•Χ“Χ•Χ SIMD. 

ΧΧ‘Χ Χ” Χ”Χ¤Χ§Χ•Χ“Χ” Χ”Χ•Χ ΧΧ”Χ¦Χ•Χ¨Χ”

$$\textunderscore{mm}\textcolor{green}{\text{<bit width>}}\textunderscore\textcolor{red}{\text{<name>}}\textunderscore\textcolor{cyan}{\text{<data type>}}$$

* bit width Χ”Χ•Χ ΧΧ”Χ΅Χ•Χ’Χ™Χ Χ”Χ‘ΧΧ™Χ:
	![Pasted image 20240330142924.png|220](/img/user/Assets/Pasted%20image%2020240330142924.png)
* data type Χ”Χ•Χ ΧΧ”Χ΅Χ•Χ’Χ™Χ Χ”Χ‘ΧΧ™Χ:
![Pasted image 20240330143015.png|300](/img/user/Assets/Pasted%20image%2020240330143015.png)

ΧΧΧ©Χ Χ Χ΅ΧΧ›Χ ΧΆΧ Χ”Χ¤Χ§Χ•Χ“Χ” 

```C
_mm256d_add_pd(__mm256 a , __mm256 b)
```

* Χ”Χ’Χ•Χ“Χ Χ”Χ•Χ 256 Χ‘Χ™Χ Χ©ΧΧ›Χ™Χ 4 doubles. 
* Χ”Χ¤Χ•Χ Χ§Χ¦Χ™Χ” Χ”Χ™Χ add
* pd - packed double Χ‘Χ™Χ“Χ™Χ•Χ§ Χ›ΧΧ• Χ‘ AVX

ΧΧ Χ”ΧΧ™Χ“ΧΆ Χ”ΧΧ“Χ•Χ™Χ§ Χ Χ™ΧΧ ΧΧ¨ΧΧ•Χ [Χ‘Χ“Χ•Χ§Χ•ΧΧ ΧΧ¦Χ™Χ” Χ©Χ SIMD Intrinsics](https://www.intel.com/content/www/us/en/docs/intrinsics-guide/index.html) 
![Pasted image 20240330143519.png](/img/user/Assets/Pasted%20image%2020240330143519.png)

Χ Χ¨ΧΧ” Χ§Χ•Χ“ c Χ¤Χ©Χ•Χ Χ©ΧΧ—Χ‘Χ¨ Χ‘Χ™Χ Χ©Χ Χ™ ΧΧΆΧ¨Χ›Χ™Χ ΧΧ΅Χ•Χ’ float 
```C
float a[8] = {2.0, 4.0, 6.0, 8.0, 10.0, 12.0, 14.0, 16.0};
float b[8] = {1.0, 3.0, 5.0, 7.0, 9.0, 11.0, 13.0, 15.0};
Β 
  for(int i=0; i<8; i++)
    a[i] = a[i] + b[i];

```

Χ•Χ›ΧΆΧ Χ Χ“Χ’Χ™Χ ΧΧ Χ”ΧΧ§Χ‘Χ™Χ ΧΧΧ™Χ• Χ‘ΧΧΧ¦ΧΆΧ•Χ Χ¤Χ§Χ•Χ“Χ•Χ SSE Χ‘Χ©Χ¤Χ C.

```C
#include <immintrin.h>
#include <stdio.h>
int main() {
Β 
  /* Initialize input vectors */
  __m256 a = _mm256_set_ps(2.0, 4.0, 6.0, 8.0, 10.0, 12.0, 14.0, 16.0);
  __m256 b = _mm256_set_ps(1.0, 3.0, 5.0, 7.0, 9.0, 11.0, 13.0, 15.0);
Β 
  /* Call add function */
  __m256 result = _mm256_add_ps(a, b);
Β 
  /* Display the elements of the result vector */
  float* f = (float*)&result;
  printf("%f %f %f %f %f %f %f %f\n",
    f[0], f[1], f[2], f[3], f[4], f[5], f[6], f[7]);

  return 0;
}
```

1) Χ Χ©Χ™Χ ΧΧ‘ ΧΧ©Χ•Χ¨Χ” `include immintrin.h` Χ©ΧΧ‘Χ™ΧΧ” ΧΧ Χ›Χ Χ”Χ”Χ¨Χ—Χ‘Χ•Χ Χ©Χ SSE/AVX Χ‘Χ©Χ¤Χ C.
2) Χ‘ΧΧ§Χ•Χ ΧΧΧΧ—Χ ΧΧΆΧ¨Χ Χ©Χ Χ•Χ§ΧΧ•Χ¨Χ™Χ ΧΧ Χ—Χ Χ• ΧΧΧΧ—ΧΧ™Χ Χ©Χ Χ™ Χ•Χ§ΧΧ•Χ¨Χ™Χ ΧΧΧ™Χ¤Χ•Χ΅ `mm256__` Χ‘ΧΧΧ¦ΧΆΧ•Χ Χ©Χ•Χ¨Χ Χ”Χ§Χ•Χ“ `mm256_set_ps_` (Χ›ΧΧ•Χ‘Χ Χ©ΧΧ•Χ§ΧΧ•Χ¨Χ™Χ Χ‘Χ’Χ“ΧΧ™Χ ΧΧ—Χ¨Χ™Χ ΧΆΧ data type ΧΧ—Χ¨Χ™Χ Χ™Χ© Χ¤Χ§Χ•Χ“Χ” Χ©Χ§Χ•ΧΧ”).
3) ΧΧΧ—Χ¨ ΧΧ›Χ Χ”Χ©ΧΧΧ©Χ Χ• Χ‘Χ¤Χ§Χ•Χ“Χ Χ” add Χ©Χ”Χ¨ΧΧ Χ• ΧΧΧΆΧΧ”.
4) Χ Χ™ΧΧ ΧΧ¨ΧΧ•Χ ΧΧ©Χ”Χ• ΧΧΆΧ Χ™Χ™Χ, Χ›Χ“Χ™ ΧΧ”ΧΧ™Χ¨ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” ΧΧΧΆΧ¨Χ Χ©Χ float Χ›Χ ΧΧ” Χ©Χ¦Χ¨Χ™Χ Χ–Χ” ΧΧΧ¤Χ•Χ΅ ΧΧ Χ”Χ¤ΧΧ ΧΧ¤Χ§Χ•Χ“Χ Χ”Χ—Χ™Χ‘Χ•Χ¨ Χ•ΧΧ”ΧΧ™Χ¨ ΧΧ Χ”Χ›ΧΧ•Χ‘Χ Χ©Χ‘Χ” Χ”Χ•Χ Χ ΧΧ¦Χ Χ‘Χ–Χ›Χ¨Χ•Χ ΧΧ›ΧΧ•Χ‘Χ Χ float, Χ‘ΧΆΧ¦Χ ΧΧ Χ—Χ Χ• Χ΄ΧΧ¤Χ¦ΧΧ™ΧΧ΄ ΧΧ Χ”Χ•Χ§ΧΧ•Χ¨ ΧΧ©ΧΧ•Χ Χ” ΧΧ΅Χ¤Χ¨Χ™ float Χ‘Χ’Χ•Χ“Χ 32 Χ‘Χ™Χ Χ›Χ ΧΧ—Χ“. Χ Χ©Χ™Χ ΧΧ‘ Χ©Χ–Χ” ΧΧ ΧΧ•ΧΧ¨ Χ© result ΧΆΧ¦ΧΧ• Χ©ΧΧ•Χ¨ Χ‘Χ–Χ›Χ¨Χ•Χ, Χ”Χ•Χ Χ”Χ™Χ” Χ™Χ›Χ•Χ ΧΧ”Χ™Χ•Χ Χ©ΧΧ•Χ¨ Χ’Χ Χ‘ register , ΧΧ‘Χ Χ›Χ©Χ”Χ§Χ•ΧΧ¤Χ™Χ™ΧΧ¨ Χ¨Χ•ΧΧ” ΧΧ Χ”Χ¤Χ§Χ•Χ“Χ” Χ”Χ–ΧΧ Χ”Χ•Χ Χ™Χ•Χ“ΧΆ Χ©Χ”Χ•Χ Χ¦Χ¨Χ™Χ ΧΧ”ΧΆΧ‘Χ™Χ¨ ΧΧ Χ”ΧΧ•Χ›Χ Χ©Χ result Χ ram Χ•ΧΧ”Χ—Χ–Χ™Χ¨ Χ›ΧΧ•Χ‘Χ Χ©Χ”Χ”Χ΅ΧΧ›ΧΧ•Χ ΧΆΧ Χ”ΧΧ•Χ›Χ Χ©Χ Χ”ΧΧ™Χ“ΧΆ Χ‘Χ›ΧΧ•Χ‘Χ Χ”Χ–ΧΧ Χ™Χ”Χ™Χ” Χ›float, Χ’Χ ΧΧ‘Χ—Χ™Χ Χ Χ’Χ•Χ“Χ Χ•Χ’Χ ΧΧ‘Χ—Χ™Χ Χ Χ™Χ™Χ¦Χ•Χ’ Χ”Χ‘Χ™ΧΧ™Χ.

_Χ”Χ¤ΧΧ Χ‘Χ”Χ“Χ¤Χ΅Χ” Χ™Χ”Χ™Χ”:_
![Pasted image 20240330144406.png](/img/user/Assets/Pasted%20image%2020240330144406.png)
Χ”Χ΅Χ™Χ‘Χ” Χ©Χ–Χ” Χ‘Χ΅Χ“Χ¨ Χ”Χ¤Χ•Χ Χ”Χ™Χ Χ‘Χ’ΧΧ Χ©Χ”ΧΧΆΧ¨Χ›Χ Χ©Χ‘Χ” Χ–Χ” Χ”Χ•Χ¨Χ¥ Χ”Χ™Χ ΧΧ΅Χ•Χ’ [[Computer Science/Computer System/Little and Big Endian\|Little Endian]]. 

Χ Χ΅ΧΧ›Χ ΧΆΧ Χ“Χ•Χ’ΧΧ” Χ Χ•Χ΅Χ¤Χ 

```C
__mm256d_mm256_permute_pd(__mm256 d , int mm8)
```

* Χ”Χ¤Χ§Χ•Χ“Χ” ΧΧ§Χ‘ΧΧ Χ•Χ§ΧΧ•Χ¨ Χ‘Χ’Χ•Χ“Χ 256 Χ‘Χ™ΧΧ™Χ Χ•ΧΧ΅Χ¤Χ¨ Χ‘Χ§Χ¨Χ” mm8.
* Χ”Χ¤Χ§Χ•Χ“Χ” ΧΧ—Χ–Χ™Χ¨Χ” Χ©Χ•Χ‘ Χ•Χ§ΧΧ•Χ¨ Χ‘Χ’Χ•Χ“Χ 256 Χ‘Χ™ΧΧ™Χ Χ©Χ”Χ•Χ Χ¤Χ¨ΧΧ•ΧΧ¦Χ™Χ” Χ©Χ Χ”Χ§ΧΧ Χ©Χ Χ§Χ‘ΧΆΧ ΧΧ¤Χ™ Χ”Χ‘Χ™ΧΧ™Χ Χ©Χ ΧΧ΅Χ¤Χ¨ Χ”Χ‘Χ§Χ¨Χ”.
	* ΧΧ΅Χ¤Χ¨ Χ”Χ‘Χ§Χ¨Χ” Χ¦Χ¨Χ™Χ ΧΧ”Χ™Χ•Χ ΧΧ΅Χ¤Χ¨ Χ©Χ Χ™ΧΧ ΧΧ™Χ™Χ¦Χ’Χ• ΧΆΧ 4 Χ‘Χ™ΧΧ™Χ Χ‘ΧΧ‘Χ“ ΧΧΧ©Χ 0b0101=0x5.
	* Χ›Χ Χ‘Χ™Χ i Χ‘ΧΧ΅Χ¤Χ¨ Χ”Χ‘Χ§Χ¨Χ” ΧΧ™Χ™Χ¦Χ’ ΧΧ Χ”ΧΆΧ‘Χ•Χ“Χ” Χ©Χ”Χ¤Χ•Χ Χ§Χ¦Χ™Χ” ΧΧΆΧ©Χ” ΧΆΧ Χ”double Χ” i Χ‘Χ•Χ§ΧΧ•Χ¨.
	* ΧΧ Χ”Χ‘Χ™Χ Χ” i Χ”Χ•Χ Χ–Χ•Χ’Χ™ ΧΧ– ΧΧ Χ”Χ•Χ Χ›Χ‘Χ•Χ™ Χ Χ©Χ™Χ Χ‘dst Χ‘ΧΧ§Χ•Χ Χ”i ΧΧ Χ”ΧΧ΅Χ¤Χ¨ Χ”i Χ‘Χ•Χ§ΧΧ•Χ¨, ΧΧ—Χ¨Χ Χ Χ‘Χ¦ΧΆ Χ”Χ—ΧΧ¤Χ”, Χ‘ΧΧ§Χ•Χ Χ”i Χ©Χ dst Χ Χ©Χ™Χ ΧΧ Χ”ΧΧ΅Χ¤Χ¨ Χ” i+1 Χ‘Χ•Χ§ΧΧ•Χ¨ Χ”Χ§ΧΧ.
	* ΧΧ Χ”Χ‘Χ™Χ Χ”i Χ”Χ•Χ ΧΧ™ Χ–Χ•Χ’Χ™ ΧΧ– ΧΧ Χ”Χ•Χ Χ›Χ‘Χ•Χ™ ΧΆΧ•Χ©Χ™Χ Χ”Χ—ΧΧ¤Χ” Χ©Χ Χ•Χ§ΧΧ•Χ¨ Χ”Χ§ΧΧ Χ‘ΧΧ™Χ Χ“Χ§Χ΅ i-1 ΧΆΧ dst Χ‘ΧΧ™Χ Χ“Χ§Χ΅ i Χ•ΧΧ—Χ¨Χ , ΧΧ Χ”Χ‘Χ™Χ Χ“ΧΧ•Χ§ ΧΧ›Χ Χ™Χ΅Χ™Χ Χ dst Χ‘ΧΧ§Χ•Χ Χ”i ΧΧ Χ•Χ§ΧΧ•Χ¨ Χ”Χ§ΧΧ Χ‘ΧΧ§Χ•Χ Χ”i.
	![Screenshot 2024-03-30 at 15.29.04.png|300](/img/user/Assets/Screenshot%202024-03-30%20at%2015.29.04.png)

ΧΧΧ©Χ ΧΆΧ‘Χ•Χ¨ Χ”Χ©Χ•Χ¨Χ Χ§Χ•Χ“ `vec2 = _mm256_permute_pd(vec2, 0x5)` - 

![Pasted image 20240330153139.png|350](/img/user/Assets/Pasted%20image%2020240330153139.png)


__Χ“Χ•Χ’ΧΧ” 1__
Χ Χ›ΧΧ•Χ‘ ΧΧ•Χ›Χ Χ™Χ ΧΆΧ c Intrinsics Χ©ΧΧ—Χ©Χ‘Χ ΧΧ Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ©Χ ΧΆΧ¨Χ ΧΧ™Χ Χ™ΧΧΧ™ Χ‘ΧΧΆΧ¨Χ Χ©Χ 8 floats.
```C
int sse_min_index(unsigned short arr[8]) {
    /* load the elements into a __m128i variable */
    __m128i input = _mm_loadu_si128((__m128i*)arr);

    /* Get the position of the minimum value in the input register */
    __m128i minpos = _mm_minpos_epu16(input);

    /* Extract the position of the minimum value */
    return ((unsigned char*) &minpos)[2];
}
```

1) Χ”Χ©Χ•Χ¨Χ” Χ”Χ¨ΧΧ©Χ•Χ Χ” ΧΧ•Χ§Χ—Χ ΧΧ Χ”ΧΧΆΧ¨Χ ΧΧ”Χ–Χ›Χ¨Χ•Χ Χ•ΧΧ•ΧΆΧ Χ ΧΧ•ΧΧ• ΧΧΧ™Χ¤Χ•Χ΅ ΧΧ΅Χ•Χ’ m128i Χ›ΧΧ•ΧΧ¨ Χ•Χ§ΧΧ•Χ¨ Χ‘Χ’Χ•Χ“Χ 128 Χ‘Χ™ΧΧ™Χ Χ©Χ integers. 
	1) Χ—Χ©Χ•Χ‘ ΧΧ¦Χ™Χ™Χ Χ©ΧΧΧ—Χ•Χ¨Χ™ Χ”Χ§ΧΧΆΧ™Χ Χ”ΧΧ™Χ¤Χ•Χ΅ Χ”Χ Χ΄Χ Χ”Χ•Χ Χ‘Χ΅Χ Χ”Χ›Χ typedef Χ©Χ long long ΧΧ‘Χ ΧΧΧ—Χ•Χ¨Χ™ Χ”Χ§ΧΧΆΧ™Χ Χ‘Χ’ΧΧ Χ©ΧΧ“Χ•Χ‘Χ¨ Χ‘ Intrinsics Χ”Χ§Χ•ΧΧ¤Χ™Χ™ΧΧ¨ Χ™Χ•Χ“ΧΆ Χ©Χ”ΧΧ™Χ¤Χ•Χ΅ Χ”Χ–Χ” Χ”Χ•Χ Χ‘ΧΆΧ¦Χ Χ•Χ§ΧΧ•Χ¨ xmm/ymm (ΧΧ¤ΧΆΧΧ™Χ, Χ”Χ§Χ•ΧΧ¤Χ™Χ™ΧΧ¨ Χ™Χ›Χ•Χ ΧΧ”Χ—ΧΧ™Χ ΧΧ ΧΧΧΆΧ•Χ ΧΧ–Χ›Χ¨Χ•Χ ΧΧ• Χ™Χ©Χ™Χ¨Χ•Χ ΧΧ•Χ§ΧΧ•Χ¨).
2) minpos - ΧΆΧ•Χ©Χ” Χ‘Χ™Χ“Χ™Χ•Χ§ ΧΧ ΧΧ” Χ©Χ”Χ§Χ•Χ“ ΧΧ‘Χ§Χ©, ΧΧ—Χ–Χ™Χ¨ ΧΧ Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ”ΧΧ™Χ Χ™ΧΧΧ™ ΧΧ‘Χ™Χ Χ›Χ Χ”integers Χ‘Χ’Χ•Χ“Χ 16 Χ‘Χ™Χ.
3) Χ”ΧΧ™Χ Χ“Χ§Χ΅ Χ Χ©ΧΧ¨Χ Χ‘Χ‘Χ™ΧΧ™Χ 16-18 Χ›Χ©Χ›Χ Χ©ΧΧ¨ Χ”Χ‘Χ™ΧΧ™Χ ΧΧΧ•Χ¤Χ΅Χ™Χ. ΧΧ›Χ Χ‘Χ©Χ•Χ¨Χ Χ”Χ”Χ—Χ–Χ¨Χ” Χ Χ¨Χ¦Χ” ΧΧ”Χ΅ΧΧ›Χ ΧΧ Χ”Χ¤ΧΧ Χ‘Χ•Χ§ΧΧ•Χ¨ Χ©Χ ΧΧ•Χ•Χ™Χ Χ•ΧΧ©ΧΧ•Χ£ ΧΧ Χ”ΧΆΧ¨Χ Χ©Χ Χ”ΧΧ• Χ”Χ©Χ Χ™. 
4) Χ›Χ“Χ™ ΧΧ§ΧΧ¤Χ ΧΧ Χ”ΧΧ•Χ›Χ Χ™Χ Χ¦Χ¨Χ™Χ ΧΧΧ Χgcc Χ“Χ’ΧΧ™Χ Χ©ΧΧΧ¤Χ©Χ¨Χ™Χ ΧΧΧ™Χ›Χ” Χ‘Χ’Χ¨Χ΅ΧΧ•Χ Χ” sse Χ”ΧΧΧΧ™ΧΧ•Χ, Χ‘ΧΧ§Χ¨Χ” Χ”Χ–Χ” Χ’Χ¨Χ΅Χ 4.1.
![Screenshot 2024-03-30 at 19.28.16.png|300](/img/user/Assets/Screenshot%202024-03-30%20at%2019.28.16.png)


__Χ“Χ•Χ’ΧΧ” 2__
Χ Χ¨Χ¦Χ” ΧΧ›ΧΧ•Χ‘ ΧΧ xysum Χ©Χ›ΧΧ‘Χ Χ• ΧΧ§Χ•Χ“Χ Χ’Χ Χ‘Χ©Χ¤Χ c. Χ‘Χ’Χ“Χ•Χ Χ”Χ¨ΧΆΧ™Χ•Χ Χ”Χ•Χ ΧΧ•ΧΧ• Χ”Χ¨ΧΆΧ™Χ•Χ Χ¨Χ§ Χ Χ¦Χ™Χ’ ΧΧ Χ”Χ§Χ•Χ“ Χ•ΧΧ Χ”Χ¤Χ§Χ•Χ“Χ•Χ Χ”Χ—Χ“Χ©Χ•Χ Χ©Χ Χ¨ΧΧ” Χ‘ΧΆΧ§Χ‘Χ•Χ Χ”Χ§Χ•Χ“ 

```C
#include <immintrin.h>

float intrinsics_calc(float x[], float y[], long n) {
    /* Initialize sums */
    __m128 xy_sum = _mm_setzero_ps();
    __m128 x2_sum = _mm_setzero_ps();
    __m128 y2_sum = _mm_setzero_ps();

    for (long i = 0; i < n; i += 4) {
        /* Load 4 floats at a time */
        __m128 x_vec = _mm_load_ps(x + i);
        __m128 y_vec = _mm_load_ps(y + i);

        /* Update vector sums */
        xy_sum = _mm_add_ps(xy_sum, _mm_mul_ps(x_vec, y_vec));
        x2_sum = _mm_add_ps(x2_sum, _mm_mul_ps(x_vec, x_vec));
        y2_sum = _mm_add_ps(y2_sum, _mm_mul_ps(y_vec, y_vec));
    }

    /* Calculate xy sum and convert to float */
    xy_sum = _mm_hadd_ps(xy_sum, xy_sum); // (x1 + x2, x3 + x4, x1 + x2, x3 + x4)
    xy_sum = _mm_hadd_ps(xy_sum, xy_sum); // (x1 + x2 + x3 + x4, x1 + x2 + x3 + x4, x1 + x2 + x3 + x4, x1 + x2 + x3 + x4)
    float xy_sum_float = _mm_cvtss_f32(xy_sum);    

    /* Calculate sqrt(x2_sum + y2_sum) and convert to float */
    __m128 square_sums = _mm_hadd_ps(x2_sum, y2_sum);
    square_sums = _mm_hadd_ps(square_sums, square_sums);
    square_sums = _mm_hadd_ps(square_sums, square_sums);
    
    __m128 square_sums_sqrt = _mm_sqrt_ps(square_sums);
    float square_sums_sqrt_float = _mm_cvtss_f32(square_sums_sqrt);
    
    /* Return xy_sum - sqrt(x2_sum + y2_sum) */
    return xy_sum_float - square_sums_sqrt_float;
}

```

1) `_mm_setzero_ps` ΧΧΧΧ—Χ Χ•Χ§ΧΧ•Χ¨ Χ©Χ 0
2) `_mm_hadd_ps` ΧΧ‘Χ¦ΧΆ horizontal sum Χ©ΧΧ§Χ‘Χ Χ©Χ Χ™ Χ•Χ§ΧΧ•Χ¨Χ™Χ x,y Χ•ΧΧ—Χ©Χ‘ $x_{i}+y_{i}$ Χ•Χ©Χ ΧΧ Χ”ΧΧ•Χ¦ΧΧ” Χ‘ΧΧ™Χ Χ“Χ§Χ΅ Χ”ΧΧΧΧ™Χ Χ‘Χ•Χ§ΧΧ•Χ¨ Χ—Χ“Χ©.
3) `_mm_cvtss_f32` ΧΧΧ™Χ¨ Χ•Χ§ΧΧ•Χ¨ Χ single scalar float32 .
4) `_mm_sqrt_ps` ΧΧ‘Χ¦ΧΆ Χ©Χ•Χ¨Χ© ΧΆΧ Χ›Χ ΧΧ™Χ‘Χ¨ Χ‘Χ•Χ§ΧΧ•Χ¨.